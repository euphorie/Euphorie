"use strict";(self.webpackChunk_patternslib_patternslib=self.webpackChunk_patternslib_patternslib||[]).push([[37569],{26790:function(t,n,e){var r=e(13744),i=e(2232),u=e(74314),o=e(30566);const a=new u.A("content-mirror");a.addArgument("target","p.content-mirror .text");class c extends r.m{static name="content-mirror";static trigger=".pat-content-mirror";static parser=(()=>a)();async init(){this.target=document.querySelector(this.options.target),i.A.add_event_listener(this.el,"input","pat-content-mirror--update-mirror",this.update_mirror.bind(this));const t=this.el.form||this.el.closest("form");i.A.add_event_listener(t,"reset",`pat-content-mirror--reset--${this.uuid}`,(()=>{this.el.value="",this.el.dispatchEvent(i.A.input_event())}));const n=this.target.querySelector(".placeholder");n&&(n.textContent=this.el.getAttribute("placeholder")||"")}update_mirror(t){const n=t.target,e=this.target;let r=n.value;if(r=r.replace(/[\r\n\v\f\s]+/g," "),n.value=r,e.textContent=r,!r){const t=this.el.getAttribute("placeholder");t&&(e.innerHTML=`<em class="placeholder">${t}</em>`)}}}o.A.register(c)},93344:function(t,n,e){var r=e(70245),i=e(4828),u=e(74314),o=e(30566);const a=i.A.getLogger("pat.doclock"),c=new u.A("doclock");c.add_argument("url","");r.A.extend({name:"doclock",trigger:".pat-doclock",_changed:!1,changing_fields:"input,select,textarea,fileupload,[contenteditable=true]",init(){if("FORM"===!this.el.tagName)return;this.options=c.parse(this.el,this.options),window.addEventListener("beforeunload",this.unlock.bind(this),{capture:!0});new MutationObserver((t=>{if("childList"===t.type)for(const n of t.removedNodes)n===this.el&&(a.debug("form removed"),this.unlock())})).observe(this.el.parentNode,{childList:!0});for(const t of this.el.querySelectorAll(this.changing_fields))t.addEventListener("input",this.lock.bind(this))},inject_response(t){const n=document.createElement("div");n.innerHTML=t;const e=n.querySelector("#global-statusmessage");if(e)for(const t of document.querySelectorAll("#global-statusmessage"))a.debug("replacing statusmessage"),t.innerHTML=e.innerHTML,o.A.scan(t);const r=n.querySelector("#content-core");if(r)for(const t of document.querySelectorAll(".quick-functions #saving-badge, .quick-functions #save-button"))a.debug("replacing quick functions"),t.outerHTML=r.innerHTML,o.A.scan(t);a.debug("initialization done")},async lock(){if(a.debug("entering lock"),this._changed)return void a.debug("already locked");if(!this.options.url)return;a.debug("locking"),this._changed=!0;const t=await fetch(`${this.options.url}?lock=true`),n=await t.text();this.inject_response(n),a.debug("locked")},async unlock(){if(a.debug("entering unlock"),!this._changed)return void a.debug("already unlocked");if(!this.options.url)return;a.debug("unlocking");const t=await fetch(`${this.options.url}?unlock=true`),n=await t.text();this.inject_response(n),this._changed=!1,a.debug("unlocked")}})},86432:function(t,n,e){var r=e(35686),i=e.n(r),u=e(70245),o=e(74314),a=e(30566),c=e(2380);const s=new o.A("shopping-cart");s.add_argument("action"),s.add_argument("id"),s.add_argument("contents"),s.add_argument("patterns");u.A.extend({name:"shopping-cart",trigger:".pat-shopping-cart",storage:c.A.local("pat-shopping-cart"),init:function(t,n){var e=s.parse(t,n);"checkbox"==t.attr("type")?t.bind("change",i().proxy((function(){"id"in e&&(this.isAddedToCart(e)?this.removeFromCart(t,e):this.addToCart(t,e))}),this)):t.bind("click",i().proxy((function(){"action"in e?"empty"==e.action?this.emptyCart():this.processCart(t,e):"id"in e&&(this.isAddedToCart(e)?this.removeFromCart(t,e):this.addToCart(t,e))}),this)),"action"in e&&(this.cartIsEmpty()?(t.addClass("is-empty"),t.attr("disabled","disabled")):t.addClass("has-items")),"id"in e&&this.isAddedToCart(e)&&(t.addClass("in-cart"),"checkbox"==t.attr("type")&&(t.attr("checked","checked"),t.parentsUntil("lable").each((function(t,n){i()(n).removeClass("unchecked").addClass("checked")})))),"contents"in e&&"keep"==e.contents.toLowerCase()?e.keep=!0:e.keep=!1,"patterns"in e||(e.patterns="")},addToCart:function(t,n){var e=this.storage.get("cart");null===e?(this.storage.set("cart",[n.id]),i()(".pat-shopping-cart.is-empty").each((function(){i()(this).removeClass("is-empty").addClass("has-items"),i()(this).removeAttr("disabled")}))):(e.push(n.id),this.storage.set("cart",e)),t.addClass("in-cart")},removeFromCart:function(t,n){var e=this.storage.get("cart");if(t.removeClass("in-cart"),1===e.length)this.emptyCart();else{var r=e.indexOf(n.id);e.splice(r,1),this.storage.set("cart",e)}},isAddedToCart:function(t){var n=this.storage.get("cart");return null!==n&&n.indexOf(t.id)>-1},emptyCart:function(){i()(".pat-shopping-cart.has-items").each((function(){i()(this).removeClass("has-items"),i()(this).addClass("is-empty")}));for(var t=i()(".pat-shopping-cart.in-cart"),n=0;n<t.length;n++){var e=i()(t[n]),r=s.parse(e,e.data());this.removeFromCart(e,r),"checkbox"==e.attr("type")&&e.prop("checked",!1).trigger("change")}this.storage.remove("cart")},cartIsEmpty:function(){return null===this.storage.get("cart")},processCart:function(t,n){var e=this.storage.get("cart"),r=n.patterns.split(" "),u="";n.keep||this.emptyCart();for(var o=0;o<r.length;o++){var c="pat-shopping-cart-"+r[o].replace("pat-",""),s=t.data(c);u+="data-"+r[o]+'="'+s+'"'}var l=i()('<form action="'+n.action+'" class="'+n.patterns+'" '+u+' method="post"><input name="shopping-cart" type="hidden" value="'+e+'"/></form>');a.A.scan(l),i()("body").append(l),l.submit()}})},95122:function(t,n,e){var r=e(35686),i=e.n(r),u=e(70245),o=e(74314),a=e(30566);const c=new o.A("sortable-table");c.addArgument("paging-type","numbers",["numbers","simple","simple_numbers","full","full_numbers","first_last_numbers"]),c.addArgument("page-length",20),c.addArgument("page-length-menu",[10,20,50,100]),c.addArgument("server-side",!1),c.addArgument("ajax",""),c.addArgument("language-info","Page _PAGE_ of _PAGES_"),c.addArgument("language-info-empty","Showing 0 to 0 of 0 entries"),c.addArgument("language-info-filtered","(filtered from _MAX_ total entries)"),c.addArgument("language-length-menu","Show _MENU_ entries per page."),c.addArgument("language-zero-records","No results found."),c.addArgument("language-search","Search"),c.addArgument("language-search-placeholder","Search term");u.A.extend({name:"sortable-table",trigger:".pat-sortable-table",async init(){this.options=c.parse(this.$el,this.options),await e.e(65846).then(e.bind(e,65846)),window.__patternslib_import_styles&&e.e(98051).then(e.bind(e,98051));let t=this.options.page["length-menu"];"string"==typeof t&&(t=JSON.parse(t)),i()(this.el).DataTable({dom:'<"data-table-top"if>rt<"data-table-bottom"lp><"data-table-clear">',retrieve:!0,pagingType:this.options.pagingType,pageLength:this.options.page.length,aLengthMenu:t,serverSide:this.options.serverSide,ajax:this.options.ajax,language:{info:this.options.language.info,infoEmpty:this.options.language["info-empty"],infoFiltered:this.options.language["info-filtered"],lengthMenu:this.options.language["length-menu"],zeroRecords:this.options.language["zero-records"],search:this.options.language.search,searchPlaceholder:this.options.language["search-placeholder"]}}),i()(this.el).on("draw.dt",(function(){a.A.scan(this)}))}})},42752:function(t,n,e){e.d(n,{Rm:function(){return l}});var r=e(13744),i=e(74314),u=e(30566),o=e(80717),a=e(2232),c=e(4828),s=e(49264);const l=c.A.getLogger("tiptap"),f=new i.A("tiptap");f.addArgument("collaboration-server",null),f.addArgument("collaboration-document",null),f.addArgument("toolbar-external",null),f.addArgument("image-panel",null),f.addArgument("embed-panel",null),f.addArgument("link-panel",null),f.addArgument("source-panel",null),f.addArgument("image-menu",null),f.addArgument("embed-menu",null),f.addArgument("link-menu",null),f.addArgument("mentions-menu",null),f.addArgument("tags-menu",null),f.addAlias("context-menu-link","link-menu"),f.addAlias("context-menu-mentions","mentions-menu"),f.addAlias("context-menu-tags","tags-menu");class p extends r.m{static name="tiptap";static trigger=".pat-tiptap";parser=(()=>f)();current_modal=null;async init(){this.toolbar_el=null;const t=(await e.e(52781).then(e.bind(e,52781))).Editor,n=(await Promise.all([e.e(52781),e.e(515)]).then(e.bind(e,515))).default,r=(await Promise.all([e.e(52781),e.e(24260)]).then(e.bind(e,24260))).default,i=(await Promise.all([e.e(52781),e.e(53953)]).then(e.bind(e,53953))).default;this.focus_handler=(await e.e(89989).then(e.bind(e,89989))).focus_handler,this.options=f.parse(this.el,this.options),this.el.style.display="none";const c=document.createElement("div");c.setAttribute("class","tiptap-container"),this.el.after(c);const l=this.el.classList.contains("pat-autofocus")||this.el.hasAttribute("autofocus"),p=["TEXTAREA","INPUT"].includes(this.el.tagName),h=t=>{p?this.el.value=t:this.el.innerHTML=t,this.el.dispatchEvent(a.A.input_event())},d=[(await Promise.all([e.e(52781),e.e(1073)]).then(e.bind(e,1073))).default.configure(),(await Promise.all([e.e(52781),e.e(734)]).then(e.bind(e,734))).Gapcursor.configure(),(await Promise.all([e.e(52781),e.e(57270)]).then(e.bind(e,57270))).History.configure()],g=this.el.getAttribute("placeholder");if(g&&d.push((await Promise.all([e.e(52781),e.e(98005)]).then(e.bind(e,98005))).Placeholder.configure({placeholder:g})),this.options.mentionsMenu&&d.push((await Promise.all([e.e(52781),e.e(40587)]).then(e.bind(e,40587))).factory({app:this,name:"mention",char:"@",plural:"mentions"}).configure({url:this.options.mentionsMenu})),this.options.tagsMenu&&d.push((await Promise.all([e.e(52781),e.e(40587)]).then(e.bind(e,40587))).factory({app:this,name:"tag",char:"#",plural:"tags"}).configure({url:this.options.tagsMenu})),this.toolbar_el=this.options.toolbarExternal?document.querySelector(this.options.toolbarExternal):null,this.toolbar_el){(await e.e(89989).then(e.bind(e,89989))).TARGETS.push(this.toolbar_el),this.focus_handler(this.toolbar_el)}const m=s.A.debounce((t=>{u.A.scan(t)}),500),v=await e.e(20359).then(e.bind(e,20359));this.toolbar=v.init_pre({app:this}),this.editor=new t({element:c,extensions:[n,i,r,...await v.init_extensions({app:this}),...d],content:(()=>p?this.el.value:this.el.innerHTML)(),onUpdate(){h(this.getHTML()),m(this.view.dom)},onCreate(){m(this.view.dom)},onFocus:async()=>{s.A.timeout(1),this.toolbar_el?.classList.add("tiptap-focus"),this.toolbar_el&&o.A.set_data(this.toolbar_el,"tiptap-instance",this)},onBlur:()=>{this.toolbar_el?.classList.remove("tiptap-focus")},autofocus:l}),v.init_post({app:this}),document.addEventListener("pat-modal-ready",(t=>{this.current_modal=t.target}))}}u.A.register(p)},39774:function(t,n,e){var r={};e.r(r),e.d(r,{VERSION:function(){return o},after:function(){return Fn},all:function(){return re},allKeys:function(){return bt},any:function(){return ie},assign:function(){return Bt},before:function(){return Rn},bind:function(){return jn},bindAll:function(){return Mn},chain:function(){return An},chunk:function(){return Ie},clone:function(){return It},collect:function(){return Qn},compact:function(){return Ce},compose:function(){return Bn},constant:function(){return tt},contains:function(){return ue},countBy:function(){return ye},create:function(){return Dt},debounce:function(){return Nn},default:function(){return $e},defaults:function(){return Ft},defer:function(){return On},delay:function(){return Tn},detect:function(){return Jn},difference:function(){return Oe},drop:function(){return Ee},each:function(){return Xn},escape:function(){return sn},every:function(){return re},extend:function(){return qt},extendOwn:function(){return Bt},filter:function(){return ne},find:function(){return Jn},findIndex:function(){return zn},findKey:function(){return In},findLastIndex:function(){return $n},findWhere:function(){return Kn},first:function(){return Se},flatten:function(){return Te},foldl:function(){return Zn},foldr:function(){return te},forEach:function(){return Xn},functions:function(){return Nt},get:function(){return Vt},groupBy:function(){return ve},has:function(){return Wt},head:function(){return Se},identity:function(){return Gt},include:function(){return ue},includes:function(){return ue},indexBy:function(){return be},indexOf:function(){return Wn},initial:function(){return je},inject:function(){return Zn},intersection:function(){return qe},invert:function(){return Lt},invoke:function(){return oe},isArguments:function(){return Q},isArray:function(){return J},isArrayBuffer:function(){return D},isBoolean:function(){return T},isDataView:function(){return G},isDate:function(){return q},isElement:function(){return O},isEmpty:function(){return lt},isEqual:function(){return vt},isError:function(){return F},isFinite:function(){return Y},isFunction:function(){return z},isMap:function(){return St},isMatch:function(){return ft},isNaN:function(){return Z},isNull:function(){return M},isNumber:function(){return P},isObject:function(){return E},isRegExp:function(){return B},isSet:function(){return Mt},isString:function(){return N},isSymbol:function(){return R},isTypedArray:function(){return ot},isUndefined:function(){return C},isWeakMap:function(){return Et},isWeakSet:function(){return Ct},iteratee:function(){return Yt},keys:function(){return st},last:function(){return Me},lastIndexOf:function(){return Gn},map:function(){return Qn},mapObject:function(){return tn},matcher:function(){return Jt},matches:function(){return Jt},max:function(){return se},memoize:function(){return Cn},methods:function(){return Nt},min:function(){return le},mixin:function(){return ze},negate:function(){return qn},noop:function(){return nn},now:function(){return on},object:function(){return Re},omit:function(){return ke},once:function(){return Dn},pairs:function(){return Ot},partial:function(){return kn},partition:function(){return _e},pick:function(){return xe},pluck:function(){return ae},property:function(){return Kt},propertyOf:function(){return en},random:function(){return un},range:function(){return De},reduce:function(){return Zn},reduceRight:function(){return te},reject:function(){return ee},rest:function(){return Ee},restArguments:function(){return S},result:function(){return bn},sample:function(){return he},select:function(){return ne},shuffle:function(){return de},size:function(){return Ae},some:function(){return ie},sortBy:function(){return ge},sortedIndex:function(){return Hn},tail:function(){return Ee},take:function(){return Se},tap:function(){return Ut},template:function(){return vn},templateSettings:function(){return fn},throttle:function(){return Ln},times:function(){return rn},toArray:function(){return pe},toPath:function(){return zt},transpose:function(){return Be},unescape:function(){return ln},union:function(){return Pe},uniq:function(){return Ne},unique:function(){return Ne},uniqueId:function(){return _n},unzip:function(){return Be},values:function(){return Tt},where:function(){return ce},without:function(){return Le},wrap:function(){return Pn},zip:function(){return Fe}});var i=e(35686),u=e.n(i),o="1.13.7",a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},c=Array.prototype,s=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,f=c.push,p=c.slice,h=s.toString,d=s.hasOwnProperty,g="undefined"!=typeof ArrayBuffer,m="undefined"!=typeof DataView,v=Array.isArray,b=Object.keys,y=Object.create,_=g&&ArrayBuffer.isView,A=isNaN,w=isFinite,x=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=Math.pow(2,53)-1;function S(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var u=Array(n+1);for(i=0;i<n;i++)u[i]=arguments[i];return u[n]=r,t.apply(this,u)}}function E(t){var n=typeof t;return"function"===n||"object"===n&&!!t}function M(t){return null===t}function C(t){return void 0===t}function T(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)}function O(t){return!(!t||1!==t.nodeType)}function L(t){var n="[object "+t+"]";return function(t){return h.call(t)===n}}var N=L("String"),P=L("Number"),q=L("Date"),B=L("RegExp"),F=L("Error"),R=L("Symbol"),D=L("ArrayBuffer"),I=L("Function"),U=a.document&&a.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof U&&(I=function(t){return"function"==typeof t||!1});var z=I,$=L("Object"),H=m&&(!/\[native code\]/.test(String(DataView))||$(new DataView(new ArrayBuffer(8)))),V="undefined"!=typeof Map&&$(new Map),W=L("DataView");var G=H?function(t){return null!=t&&z(t.getInt8)&&D(t.buffer)}:W,J=v||L("Array");function K(t,n){return null!=t&&d.call(t,n)}var X=L("Arguments");!function(){X(arguments)||(X=function(t){return K(t,"callee")})}();var Q=X;function Y(t){return!R(t)&&w(t)&&!isNaN(parseFloat(t))}function Z(t){return P(t)&&A(t)}function tt(t){return function(){return t}}function nt(t){return function(n){var e=t(n);return"number"==typeof e&&e>=0&&e<=j}}function et(t){return function(n){return null==n?void 0:n[t]}}var rt=et("byteLength"),it=nt(rt),ut=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var ot=g?function(t){return _?_(t)&&!G(t):it(t)&&ut.test(h.call(t))}:tt(!1),at=et("length");function ct(t,n){n=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(t){return!0===n[t]},push:function(e){return n[e]=!0,t.push(e)}}}(n);var e=k.length,r=t.constructor,i=z(r)&&r.prototype||s,u="constructor";for(K(t,u)&&!n.contains(u)&&n.push(u);e--;)(u=k[e])in t&&t[u]!==i[u]&&!n.contains(u)&&n.push(u)}function st(t){if(!E(t))return[];if(b)return b(t);var n=[];for(var e in t)K(t,e)&&n.push(e);return x&&ct(t,n),n}function lt(t){if(null==t)return!0;var n=at(t);return"number"==typeof n&&(J(t)||N(t)||Q(t))?0===n:0===at(st(t))}function ft(t,n){var e=st(n),r=e.length;if(null==t)return!r;for(var i=Object(t),u=0;u<r;u++){var o=e[u];if(n[o]!==i[o]||!(o in i))return!1}return!0}function pt(t){return t instanceof pt?t:this instanceof pt?void(this._wrapped=t):new pt(t)}function ht(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,rt(t))}pt.VERSION=o,pt.prototype.value=function(){return this._wrapped},pt.prototype.valueOf=pt.prototype.toJSON=pt.prototype.value,pt.prototype.toString=function(){return String(this._wrapped)};var dt="[object DataView]";function gt(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var i=typeof t;return("function"===i||"object"===i||"object"==typeof n)&&mt(t,n,e,r)}function mt(t,n,e,r){t instanceof pt&&(t=t._wrapped),n instanceof pt&&(n=n._wrapped);var i=h.call(t);if(i!==h.call(n))return!1;if(H&&"[object Object]"==i&&G(t)){if(!G(n))return!1;i=dt}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return l.valueOf.call(t)===l.valueOf.call(n);case"[object ArrayBuffer]":case dt:return mt(ht(t),ht(n),e,r)}var u="[object Array]"===i;if(!u&&ot(t)){if(rt(t)!==rt(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;u=!0}if(!u){if("object"!=typeof t||"object"!=typeof n)return!1;var o=t.constructor,a=n.constructor;if(o!==a&&!(z(o)&&o instanceof o&&z(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];for(var c=(e=e||[]).length;c--;)if(e[c]===t)return r[c]===n;if(e.push(t),r.push(n),u){if((c=t.length)!==n.length)return!1;for(;c--;)if(!gt(t[c],n[c],e,r))return!1}else{var s,f=st(t);if(c=f.length,st(n).length!==c)return!1;for(;c--;)if(!K(n,s=f[c])||!gt(t[s],n[s],e,r))return!1}return e.pop(),r.pop(),!0}function vt(t,n){return gt(t,n)}function bt(t){if(!E(t))return[];var n=[];for(var e in t)n.push(e);return x&&ct(t,n),n}function yt(t){var n=at(t);return function(e){if(null==e)return!1;var r=bt(e);if(at(r))return!1;for(var i=0;i<n;i++)if(!z(e[t[i]]))return!1;return t!==kt||!z(e[_t])}}var _t="forEach",At=["clear","delete"],wt=["get","has","set"],xt=At.concat(_t,wt),kt=At.concat(wt),jt=["add"].concat(At,_t,"has"),St=V?yt(xt):L("Map"),Et=V?yt(kt):L("WeakMap"),Mt=V?yt(jt):L("Set"),Ct=L("WeakSet");function Tt(t){for(var n=st(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=t[n[i]];return r}function Ot(t){for(var n=st(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=[n[i],t[n[i]]];return r}function Lt(t){for(var n={},e=st(t),r=0,i=e.length;r<i;r++)n[t[e[r]]]=e[r];return n}function Nt(t){var n=[];for(var e in t)z(t[e])&&n.push(e);return n.sort()}function Pt(t,n){return function(e){var r=arguments.length;if(n&&(e=Object(e)),r<2||null==e)return e;for(var i=1;i<r;i++)for(var u=arguments[i],o=t(u),a=o.length,c=0;c<a;c++){var s=o[c];n&&void 0!==e[s]||(e[s]=u[s])}return e}}var qt=Pt(bt),Bt=Pt(st),Ft=Pt(bt,!0);function Rt(t){if(!E(t))return{};if(y)return y(t);var n=function(){};n.prototype=t;var e=new n;return n.prototype=null,e}function Dt(t,n){var e=Rt(t);return n&&Bt(e,n),e}function It(t){return E(t)?J(t)?t.slice():qt({},t):t}function Ut(t,n){return n(t),t}function zt(t){return J(t)?t:[t]}function $t(t){return pt.toPath(t)}function Ht(t,n){for(var e=n.length,r=0;r<e;r++){if(null==t)return;t=t[n[r]]}return e?t:void 0}function Vt(t,n,e){var r=Ht(t,$t(n));return C(r)?e:r}function Wt(t,n){for(var e=(n=$t(n)).length,r=0;r<e;r++){var i=n[r];if(!K(t,i))return!1;t=t[i]}return!!e}function Gt(t){return t}function Jt(t){return t=Bt({},t),function(n){return ft(n,t)}}function Kt(t){return t=$t(t),function(n){return Ht(n,t)}}function Xt(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,u){return t.call(n,e,r,i,u)}}return function(){return t.apply(n,arguments)}}function Qt(t,n,e){return null==t?Gt:z(t)?Xt(t,n,e):E(t)&&!J(t)?Jt(t):Kt(t)}function Yt(t,n){return Qt(t,n,1/0)}function Zt(t,n,e){return pt.iteratee!==Yt?pt.iteratee(t,n):Qt(t,n,e)}function tn(t,n,e){n=Zt(n,e);for(var r=st(t),i=r.length,u={},o=0;o<i;o++){var a=r[o];u[a]=n(t[a],a,t)}return u}function nn(){}function en(t){return null==t?nn:function(n){return Vt(t,n)}}function rn(t,n,e){var r=Array(Math.max(0,t));n=Xt(n,e,1);for(var i=0;i<t;i++)r[i]=n(i);return r}function un(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))}pt.toPath=zt,pt.iteratee=Yt;var on=Date.now||function(){return(new Date).getTime()};function an(t){var n=function(n){return t[n]},e="(?:"+st(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}}var cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},sn=an(cn),ln=an(Lt(cn)),fn=pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},pn=/(.)^/,hn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},dn=/\\|'|\r|\n|\u2028|\u2029/g;function gn(t){return"\\"+hn[t]}var mn=/^\s*(\w|\$)+\s*$/;function vn(t,n,e){!n&&e&&(n=e),n=Ft({},n,pt.templateSettings);var r=RegExp([(n.escape||pn).source,(n.interpolate||pn).source,(n.evaluate||pn).source].join("|")+"|$","g"),i=0,u="__p+='";t.replace(r,(function(n,e,r,o,a){return u+=t.slice(i,a).replace(dn,gn),i=a+n.length,e?u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(u+="';\n"+o+"\n__p+='"),n})),u+="';\n";var o,a=n.variable;if(a){if(!mn.test(a))throw new Error("variable is not a bare identifier: "+a)}else u="with(obj||{}){\n"+u+"}\n",a="obj";u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{o=new Function(a,"_",u)}catch(t){throw t.source=u,t}var c=function(t){return o.call(this,t,pt)};return c.source="function("+a+"){\n"+u+"}",c}function bn(t,n,e){var r=(n=$t(n)).length;if(!r)return z(e)?e.call(t):e;for(var i=0;i<r;i++){var u=null==t?void 0:t[n[i]];void 0===u&&(u=e,i=r),t=z(u)?u.call(t):u}return t}var yn=0;function _n(t){var n=++yn+"";return t?t+n:n}function An(t){var n=pt(t);return n._chain=!0,n}function wn(t,n,e,r,i){if(!(r instanceof n))return t.apply(e,i);var u=Rt(t.prototype),o=t.apply(u,i);return E(o)?o:u}var xn=S((function(t,n){var e=xn.placeholder,r=function(){for(var i=0,u=n.length,o=Array(u),a=0;a<u;a++)o[a]=n[a]===e?arguments[i++]:n[a];for(;i<arguments.length;)o.push(arguments[i++]);return wn(t,r,this,this,o)};return r}));xn.placeholder=pt;var kn=xn,jn=S((function(t,n,e){if(!z(t))throw new TypeError("Bind must be called on a function");var r=S((function(i){return wn(t,r,n,this,e.concat(i))}));return r})),Sn=nt(at);function En(t,n,e,r){if(r=r||[],n||0===n){if(n<=0)return r.concat(t)}else n=1/0;for(var i=r.length,u=0,o=at(t);u<o;u++){var a=t[u];if(Sn(a)&&(J(a)||Q(a)))if(n>1)En(a,n-1,e,r),i=r.length;else for(var c=0,s=a.length;c<s;)r[i++]=a[c++];else e||(r[i++]=a)}return r}var Mn=S((function(t,n){var e=(n=En(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=n[e];t[r]=jn(t[r],t)}return t}));function Cn(t,n){var e=function(r){var i=e.cache,u=""+(n?n.apply(this,arguments):r);return K(i,u)||(i[u]=t.apply(this,arguments)),i[u]};return e.cache={},e}var Tn=S((function(t,n,e){return setTimeout((function(){return t.apply(null,e)}),n)})),On=kn(Tn,pt,1);function Ln(t,n,e){var r,i,u,o,a=0;e||(e={});var c=function(){a=!1===e.leading?0:on(),r=null,o=t.apply(i,u),r||(i=u=null)},s=function(){var s=on();a||!1!==e.leading||(a=s);var l=n-(s-a);return i=this,u=arguments,l<=0||l>n?(r&&(clearTimeout(r),r=null),a=s,o=t.apply(i,u),r||(i=u=null)):r||!1===e.trailing||(r=setTimeout(c,l)),o};return s.cancel=function(){clearTimeout(r),a=0,r=i=u=null},s}function Nn(t,n,e){var r,i,u,o,a,c=function(){var s=on()-i;n>s?r=setTimeout(c,n-s):(r=null,e||(o=t.apply(a,u)),r||(u=a=null))},s=S((function(s){return a=this,u=s,i=on(),r||(r=setTimeout(c,n),e&&(o=t.apply(a,u))),o}));return s.cancel=function(){clearTimeout(r),r=u=a=null},s}function Pn(t,n){return kn(n,t)}function qn(t){return function(){return!t.apply(this,arguments)}}function Bn(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}}function Fn(t,n){return function(){if(--t<1)return n.apply(this,arguments)}}function Rn(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=null),e}}var Dn=kn(Rn,2);function In(t,n,e){n=Zt(n,e);for(var r,i=st(t),u=0,o=i.length;u<o;u++)if(n(t[r=i[u]],r,t))return r}function Un(t){return function(n,e,r){e=Zt(e,r);for(var i=at(n),u=t>0?0:i-1;u>=0&&u<i;u+=t)if(e(n[u],u,n))return u;return-1}}var zn=Un(1),$n=Un(-1);function Hn(t,n,e,r){for(var i=(e=Zt(e,r,1))(n),u=0,o=at(t);u<o;){var a=Math.floor((u+o)/2);e(t[a])<i?u=a+1:o=a}return u}function Vn(t,n,e){return function(r,i,u){var o=0,a=at(r);if("number"==typeof u)t>0?o=u>=0?u:Math.max(u+a,o):a=u>=0?Math.min(u+1,a):u+a+1;else if(e&&u&&a)return r[u=e(r,i)]===i?u:-1;if(i!=i)return(u=n(p.call(r,o,a),Z))>=0?u+o:-1;for(u=t>0?o:a-1;u>=0&&u<a;u+=t)if(r[u]===i)return u;return-1}}var Wn=Vn(1,zn,Hn),Gn=Vn(-1,$n);function Jn(t,n,e){var r=(Sn(t)?zn:In)(t,n,e);if(void 0!==r&&-1!==r)return t[r]}function Kn(t,n){return Jn(t,Jt(n))}function Xn(t,n,e){var r,i;if(n=Xt(n,e),Sn(t))for(r=0,i=t.length;r<i;r++)n(t[r],r,t);else{var u=st(t);for(r=0,i=u.length;r<i;r++)n(t[u[r]],u[r],t)}return t}function Qn(t,n,e){n=Zt(n,e);for(var r=!Sn(t)&&st(t),i=(r||t).length,u=Array(i),o=0;o<i;o++){var a=r?r[o]:o;u[o]=n(t[a],a,t)}return u}function Yn(t){return function(n,e,r,i){var u=arguments.length>=3;return function(n,e,r,i){var u=!Sn(n)&&st(n),o=(u||n).length,a=t>0?0:o-1;for(i||(r=n[u?u[a]:a],a+=t);a>=0&&a<o;a+=t){var c=u?u[a]:a;r=e(r,n[c],c,n)}return r}(n,Xt(e,i,4),r,u)}}var Zn=Yn(1),te=Yn(-1);function ne(t,n,e){var r=[];return n=Zt(n,e),Xn(t,(function(t,e,i){n(t,e,i)&&r.push(t)})),r}function ee(t,n,e){return ne(t,qn(Zt(n)),e)}function re(t,n,e){n=Zt(n,e);for(var r=!Sn(t)&&st(t),i=(r||t).length,u=0;u<i;u++){var o=r?r[u]:u;if(!n(t[o],o,t))return!1}return!0}function ie(t,n,e){n=Zt(n,e);for(var r=!Sn(t)&&st(t),i=(r||t).length,u=0;u<i;u++){var o=r?r[u]:u;if(n(t[o],o,t))return!0}return!1}function ue(t,n,e,r){return Sn(t)||(t=Tt(t)),("number"!=typeof e||r)&&(e=0),Wn(t,n,e)>=0}var oe=S((function(t,n,e){var r,i;return z(n)?i=n:(n=$t(n),r=n.slice(0,-1),n=n[n.length-1]),Qn(t,(function(t){var u=i;if(!u){if(r&&r.length&&(t=Ht(t,r)),null==t)return;u=t[n]}return null==u?u:u.apply(t,e)}))}));function ae(t,n){return Qn(t,Kt(n))}function ce(t,n){return ne(t,Jt(n))}function se(t,n,e){var r,i,u=-1/0,o=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Sn(t)?t:Tt(t)).length;a<c;a++)null!=(r=t[a])&&r>u&&(u=r);else n=Zt(n,e),Xn(t,(function(t,e,r){((i=n(t,e,r))>o||i===-1/0&&u===-1/0)&&(u=t,o=i)}));return u}function le(t,n,e){var r,i,u=1/0,o=1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Sn(t)?t:Tt(t)).length;a<c;a++)null!=(r=t[a])&&r<u&&(u=r);else n=Zt(n,e),Xn(t,(function(t,e,r){((i=n(t,e,r))<o||i===1/0&&u===1/0)&&(u=t,o=i)}));return u}var fe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pe(t){return t?J(t)?p.call(t):N(t)?t.match(fe):Sn(t)?Qn(t,Gt):Tt(t):[]}function he(t,n,e){if(null==n||e)return Sn(t)||(t=Tt(t)),t[un(t.length-1)];var r=pe(t),i=at(r);n=Math.max(Math.min(n,i),0);for(var u=i-1,o=0;o<n;o++){var a=un(o,u),c=r[o];r[o]=r[a],r[a]=c}return r.slice(0,n)}function de(t){return he(t,1/0)}function ge(t,n,e){var r=0;return n=Zt(n,e),ae(Qn(t,(function(t,e,i){return{value:t,index:r++,criteria:n(t,e,i)}})).sort((function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index-n.index})),"value")}function me(t,n){return function(e,r,i){var u=n?[[],[]]:{};return r=Zt(r,i),Xn(e,(function(n,i){var o=r(n,i,e);t(u,n,o)})),u}}var ve=me((function(t,n,e){K(t,e)?t[e].push(n):t[e]=[n]})),be=me((function(t,n,e){t[e]=n})),ye=me((function(t,n,e){K(t,e)?t[e]++:t[e]=1})),_e=me((function(t,n,e){t[e?0:1].push(n)}),!0);function Ae(t){return null==t?0:Sn(t)?t.length:st(t).length}function we(t,n,e){return n in e}var xe=S((function(t,n){var e={},r=n[0];if(null==t)return e;z(r)?(n.length>1&&(r=Xt(r,n[1])),n=bt(t)):(r=we,n=En(n,!1,!1),t=Object(t));for(var i=0,u=n.length;i<u;i++){var o=n[i],a=t[o];r(a,o,t)&&(e[o]=a)}return e})),ke=S((function(t,n){var e,r=n[0];return z(r)?(r=qn(r),n.length>1&&(e=n[1])):(n=Qn(En(n,!1,!1),String),r=function(t,e){return!ue(n,e)}),xe(t,r,e)}));function je(t,n,e){return p.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))}function Se(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[0]:je(t,t.length-n)}function Ee(t,n,e){return p.call(t,null==n||e?1:n)}function Me(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[t.length-1]:Ee(t,Math.max(0,t.length-n))}function Ce(t){return ne(t,Boolean)}function Te(t,n){return En(t,n,!1)}var Oe=S((function(t,n){return n=En(n,!0,!0),ne(t,(function(t){return!ue(n,t)}))})),Le=S((function(t,n){return Oe(t,n)}));function Ne(t,n,e,r){T(n)||(r=e,e=n,n=!1),null!=e&&(e=Zt(e,r));for(var i=[],u=[],o=0,a=at(t);o<a;o++){var c=t[o],s=e?e(c,o,t):c;n&&!e?(o&&u===s||i.push(c),u=s):e?ue(u,s)||(u.push(s),i.push(c)):ue(i,c)||i.push(c)}return i}var Pe=S((function(t){return Ne(En(t,!0,!0))}));function qe(t){for(var n=[],e=arguments.length,r=0,i=at(t);r<i;r++){var u=t[r];if(!ue(n,u)){var o;for(o=1;o<e&&ue(arguments[o],u);o++);o===e&&n.push(u)}}return n}function Be(t){for(var n=t&&se(t,at).length||0,e=Array(n),r=0;r<n;r++)e[r]=ae(t,r);return e}var Fe=S(Be);function Re(t,n){for(var e={},r=0,i=at(t);r<i;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e}function De(t,n,e){null==n&&(n=t||0,t=0),e||(e=n<t?-1:1);for(var r=Math.max(Math.ceil((n-t)/e),0),i=Array(r),u=0;u<r;u++,t+=e)i[u]=t;return i}function Ie(t,n){if(null==n||n<1)return[];for(var e=[],r=0,i=t.length;r<i;)e.push(p.call(t,r,r+=n));return e}function Ue(t,n){return t._chain?pt(n).chain():n}function ze(t){return Xn(Nt(t),(function(n){var e=pt[n]=t[n];pt.prototype[n]=function(){var t=[this._wrapped];return f.apply(t,arguments),Ue(this,e.apply(pt,t))}})),pt}Xn(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=c[t];pt.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),Ue(this,e)}})),Xn(["concat","join","slice"],(function(t){var n=c[t];pt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=n.apply(t,arguments)),Ue(this,t)}}));var $e=pt,He=ze(r);He._=He;var Ve=He,We=e(67545),Ge=e(70245),Je=e(2232),Ke=e(4828),Xe=e(74314);const Qe=Ke.A.getLogger("pat-upload"),Ye=new Xe.A("upload");Ye.add_argument("concurrent-uploads","multiple",["multiple","single"]),Ye.add_argument("ajax-upload",!0),Ye.add_argument("post-upload",!0),Ye.add_argument("class-name","upload"),Ye.add_argument("clickable","true"),Ye.add_argument("current-path"),Ye.add_argument("label","Drop files hereâ€¦"),Ye.add_argument("name","file"),Ye.add_argument("previews-container",".previews"),Ye.add_argument("timeout",12e4),Ye.add_argument("trigger","button"),Ye.add_argument("url"),Ye.add_argument("headers");Ge.A.extend({name:"upload",trigger:".pat-upload",parser:"patternslib",defaults:{addRemoveLinks:!1,maxFiles:null,maxFilesize:99999999,previewTemplate:null},template_preview:null,async init(t,n){window.__patternslib_import_styles&&e.e(11507).then(e.bind(e,11507));const r=(await e.e(62628).then(e.t.bind(e,62628,23))).default;r.autoDiscover=!1,this.template_preview=(await e.e(75112).then(e.t.bind(e,75112,17))).default;const i=(await e.e(83867).then(e.t.bind(e,83867,17))).default;this.cfgs=Ve.extend(Ve.clone(this.defaults),Ye.parse(t,n,!0)[0]),this.$el.addClass(this.cfgs.className),this.$el.append(Ve.template(i)({_t:We.A,label:(0,We.A)(this.cfgs.label)})),this.cfgs.ajaxUpload||u()(".fallback",this.$el).remove();try{this.dropzone=new r(u()(".upload-area",this.$el)[0],this.getDzoneOptions())}catch(t){throw Qe.error(t),t}this.registerHandlers()},refresh(){const t=this.el.closest(".pat-subform");if(t){Qe.debug("Refresh subform");const n=t.querySelector("button[type='submit']");n?.click()}else{const t=this.el.closest("form");t&&t.matches(".pat-inject")&&(Qe.debug("Refresh form"),t.dispatchEvent(Je.A.submit_event()))}},registerHandlers(){this.dropzone.on("complete",u().proxy((function(t){this.cfgs.postUpload&&setTimeout((function(){u()(t.previewElement).fadeOut()}),1e3),0===Ve.filter(this.dropzone.files,(function(t){return"success"!==t.status})).length&&this.refresh()}),this))},getUrl(){let t=this.cfgs.url;if(!t){const n=this.$el.closest("form");t=n.length>0?n.attr("action"):window.location.href}return t},getDzoneOptions(){"string"==typeof this.cfgs.clickable&&(this.cfgs.clickable="true"===this.cfgs.clickable);const t=u().extend({},this.cfgs);if(delete t.postUpload,this.cfgs.previewsContainer){const n=this.$el.find(this.cfgs.previewsContainer);n.length>0&&(t.previewsContainer=n[0])}t.url=this.getUrl(),t.uploadMultiple="multiple"===t.concurrentUploads,t.previewTemplate=this.template_preview;try{this.cfgs.headers&&(t.headers=JSON.parse(this.cfgs.headers))}catch(t){Qe.warn("Could not parse the headers option")}return t}})}}]);
//# sourceMappingURL=37569.076d8bd8646b41581228.min.js.map