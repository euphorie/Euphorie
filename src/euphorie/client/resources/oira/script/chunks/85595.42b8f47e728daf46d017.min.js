"use strict";(self.webpackChunk_patternslib_patternslib=self.webpackChunk_patternslib_patternslib||[]).push([[85595],{67671:function(t,n,e){var r=e(83579),i=e.n(r),u=e(70542);const o=new(e(94791).Z)("content-mirror");o.addArgument("target","p.content-mirror .text");u.Z.extend({name:"content-mirror",trigger:".pat-content-mirror",init:function(t){this.options=o.parse(this.el,this.options);const n=i()(this.options.target).parents("p.content-mirror").first();t.on("input propertychange",i().proxy(this.updateMirror,this,this.options.target)),t.parents("form").first().on("reset",(function(){t.val(""),n.html(n.html())})),i()(".placeholder",this.options.target).text(t.attr("placeholder")||"")},updateMirror:function(t,n){const e=i()(n.target),r=i()(t);if(r.text(e.val()),!e.val().length){const t=e.attr("placeholder");t&&r.html('<em class="placeholder">'+t+"</em>")}}})},11442:function(t,n,e){var r=e(70542),i=e(4258),u=e(94791),o=e(86272);const a=i.Z.getLogger("pat.doclock"),c=new u.Z("doclock");c.add_argument("url","");r.Z.extend({name:"doclock",trigger:".pat-doclock",_changed:!1,changing_fields:"input,select,textarea,fileupload,[contenteditable=true]",init(){if("FORM"===!this.el.tagName)return;this.options=c.parse(this.el,this.options),window.addEventListener("beforeunload",this.unlock.bind(this),{capture:!0});new MutationObserver((t=>{if("childList"===t.type)for(const n of t.removedNodes)n===this.el&&(a.debug("form removed"),this.unlock())})).observe(this.el.parentNode,{childList:!0});for(const t of this.el.querySelectorAll(this.changing_fields))t.addEventListener("input",this.lock.bind(this))},inject_response(t){const n=document.createElement("div");n.innerHTML=t;const e=n.querySelector("#global-statusmessage");if(e)for(const t of document.querySelectorAll("#global-statusmessage"))a.debug("replacing statusmessage"),t.innerHTML=e.innerHTML,o.Z.scan(t);const r=n.querySelector("#content-core");if(r)for(const t of document.querySelectorAll(".quick-functions #saving-badge, .quick-functions #save-button"))a.debug("replacing quick functions"),t.outerHTML=r.innerHTML,o.Z.scan(t);a.debug("initialization done")},async lock(){if(a.debug("entering lock"),this._changed)return void a.debug("already locked");if(!this.options.url)return;a.debug("locking"),this._changed=!0;const t=await fetch(`${this.options.url}?lock=true`),n=await t.text();this.inject_response(n),a.debug("locked")},async unlock(){if(a.debug("entering unlock"),!this._changed)return void a.debug("already unlocked");if(!this.options.url)return;a.debug("unlocking");const t=await fetch(`${this.options.url}?unlock=true`),n=await t.text();this.inject_response(n),this._changed=!1,a.debug("unlocked")}})},86558:function(t,n,e){var r=e(83579),i=e.n(r),u=e(70542),o=e(94791),a=e(86272),c=e(23762);const s=new o.Z("shopping-cart");s.add_argument("action"),s.add_argument("id"),s.add_argument("contents"),s.add_argument("patterns");u.Z.extend({name:"shopping-cart",trigger:".pat-shopping-cart",storage:c.Z.local("pat-shopping-cart"),init:function(t,n){var e=s.parse(t,n);"checkbox"==t.attr("type")?t.bind("change",i().proxy((function(){"id"in e&&(this.isAddedToCart(e)?this.removeFromCart(t,e):this.addToCart(t,e))}),this)):t.bind("click",i().proxy((function(){"action"in e?"empty"==e.action?this.emptyCart():this.processCart(t,e):"id"in e&&(this.isAddedToCart(e)?this.removeFromCart(t,e):this.addToCart(t,e))}),this)),"action"in e&&(this.cartIsEmpty()?(t.addClass("is-empty"),t.attr("disabled","disabled")):t.addClass("has-items")),"id"in e&&this.isAddedToCart(e)&&(t.addClass("in-cart"),"checkbox"==t.attr("type")&&(t.attr("checked","checked"),t.parentsUntil("lable").each((function(t,n){i()(n).removeClass("unchecked").addClass("checked")})))),"contents"in e&&"keep"==e.contents.toLowerCase()?e.keep=!0:e.keep=!1,"patterns"in e||(e.patterns="")},addToCart:function(t,n){var e=this.storage.get("cart");null===e?(this.storage.set("cart",[n.id]),i()(".pat-shopping-cart.is-empty").each((function(){i()(this).removeClass("is-empty").addClass("has-items"),i()(this).removeAttr("disabled")}))):(e.push(n.id),this.storage.set("cart",e)),t.addClass("in-cart")},removeFromCart:function(t,n){var e=this.storage.get("cart");if(t.removeClass("in-cart"),1===e.length)this.emptyCart();else{var r=e.indexOf(n.id);e.splice(r,1),this.storage.set("cart",e)}},isAddedToCart:function(t){var n=this.storage.get("cart");return null!==n&&n.indexOf(t.id)>-1},emptyCart:function(){i()(".pat-shopping-cart.has-items").each((function(){i()(this).removeClass("has-items"),i()(this).addClass("is-empty")}));for(var t=i()(".pat-shopping-cart.in-cart"),n=0;n<t.length;n++){var e=i()(t[n]),r=s.parse(e,e.data());this.removeFromCart(e,r),"checkbox"==e.attr("type")&&e.prop("checked",!1).trigger("change")}this.storage.remove("cart")},cartIsEmpty:function(){return null===this.storage.get("cart")},processCart:function(t,n){var e=this.storage.get("cart"),r=n.patterns.split(" "),u="";n.keep||this.emptyCart();for(var o=0;o<r.length;o++){var c="pat-shopping-cart-"+r[o].replace("pat-",""),s=t.data(c);u+="data-"+r[o]+'="'+s+'"'}var l=i()('<form action="'+n.action+'" class="'+n.patterns+'" '+u+' method="post"><input name="shopping-cart" type="hidden" value="'+e+'"/></form>');a.Z.scan(l),i()("body").append(l),l.submit()}})},37114:function(t,n,e){var r=e(83579),i=e.n(r),u=e(70542),o=e(94791),a=e(86272);const c=new o.Z("sortable-table");c.addArgument("paging-type","numbers",["numbers","simple","simple_numbers","full","full_numbers","first_last_numbers"]),c.addArgument("page-length",20),c.addArgument("page-length-menu",[10,20,50,100]),c.addArgument("server-side",!1),c.addArgument("ajax",""),c.addArgument("language-info","Page _PAGE_ of _PAGES_"),c.addArgument("language-info-empty","Showing 0 to 0 of 0 entries"),c.addArgument("language-info-filtered","(filtered from _MAX_ total entries)"),c.addArgument("language-length-menu","Show _MENU_ entries per page."),c.addArgument("language-zero-records","No results found."),c.addArgument("language-search","Search"),c.addArgument("language-search-placeholder","Search term");u.Z.extend({name:"sortable-table",trigger:".pat-sortable-table",async init(){this.options=c.parse(this.$el,this.options),await e.e(30991).then(e.bind(e,30991)),window.__patternslib_import_styles&&e.e(41864).then(e.bind(e,41864));let t=this.options.page["length-menu"];"string"==typeof t&&(t=JSON.parse(t)),i()(this.el).DataTable({dom:'<"data-table-top"if>rt<"data-table-bottom"lp><"data-table-clear">',retrieve:!0,pagingType:this.options.pagingType,pageLength:this.options.page.length,aLengthMenu:t,serverSide:this.options.serverSide,ajax:this.options.ajax,language:{info:this.options.language.info,infoEmpty:this.options.language["info-empty"],infoFiltered:this.options.language["info-filtered"],lengthMenu:this.options.language["length-menu"],zeroRecords:this.options.language["zero-records"],search:this.options.language.search,searchPlaceholder:this.options.language["search-placeholder"]}}),i()(this.el).on("draw.dt",(function(){a.Z.scan(this)}))}})},30450:function(t,n,e){e.d(n,{cM:function(){return l}});var r=e(92041),i=e(94791),u=e(86272),o=e(56938),a=e(57467),c=e(4258),s=e(92452);const l=c.Z.getLogger("tiptap"),f=new i.Z("tiptap");f.addArgument("collaboration-server",null),f.addArgument("collaboration-document",null),f.addArgument("toolbar-external",null),f.addArgument("image-panel",null),f.addArgument("embed-panel",null),f.addArgument("link-panel",null),f.addArgument("source-panel",null),f.addArgument("image-menu",null),f.addArgument("embed-menu",null),f.addArgument("link-menu",null),f.addArgument("mentions-menu",null),f.addArgument("tags-menu",null),f.addAlias("context-menu-link","link-menu"),f.addAlias("context-menu-mentions","mentions-menu"),f.addAlias("context-menu-tags","tags-menu");class p extends r.o{static name="tiptap";static trigger=".pat-tiptap";parser=f;current_modal=null;async init(){this.toolbar_el=null;const t=(await e.e(73845).then(e.bind(e,73845))).Editor,n=(await Promise.all([e.e(73845),e.e(20336)]).then(e.bind(e,20336))).default,r=(await Promise.all([e.e(73845),e.e(26022)]).then(e.bind(e,26022))).default,i=(await Promise.all([e.e(73845),e.e(52701)]).then(e.bind(e,52701))).default;this.focus_handler=(await e.e(84193).then(e.bind(e,84193))).focus_handler,this.options=f.parse(this.el,this.options),this.el.style.display="none";const c=document.createElement("div");c.setAttribute("class","tiptap-container"),this.el.after(c);const l=this.el.classList.contains("pat-autofocus")||this.el.hasAttribute("autofocus"),p=["TEXTAREA","INPUT"].includes(this.el.tagName),h=t=>{p?this.el.value=t:this.el.innerHTML=t,this.el.dispatchEvent(a.Z.input_event())},d=[(await Promise.all([e.e(73845),e.e(35525)]).then(e.bind(e,35525))).default.configure(),(await Promise.all([e.e(73845),e.e(9966)]).then(e.bind(e,9966))).Gapcursor.configure(),(await Promise.all([e.e(73845),e.e(78825)]).then(e.bind(e,78825))).History.configure()],g=this.el.getAttribute("placeholder");if(g&&d.push((await Promise.all([e.e(73845),e.e(93237)]).then(e.bind(e,93237))).Placeholder.configure({placeholder:g})),this.options.mentionsMenu&&d.push((await Promise.all([e.e(73845),e.e(99776)]).then(e.bind(e,99776))).factory({app:this,name:"mention",char:"@",plural:"mentions"}).configure({url:this.options.mentionsMenu})),this.options.tagsMenu&&d.push((await Promise.all([e.e(73845),e.e(99776)]).then(e.bind(e,99776))).factory({app:this,name:"tag",char:"#",plural:"tags"}).configure({url:this.options.tagsMenu})),this.toolbar_el=this.options.toolbarExternal?document.querySelector(this.options.toolbarExternal):null,this.toolbar_el){(await e.e(84193).then(e.bind(e,84193))).TARGETS.push(this.toolbar_el),this.focus_handler(this.toolbar_el)}const m=s.Z.debounce((t=>{u.Z.scan(t)}),500),v=await e.e(42836).then(e.bind(e,42836));this.toolbar=v.init_pre({app:this}),this.editor=new t({element:c,extensions:[n,i,r,...await v.init_extensions({app:this}),...d],content:(()=>p?this.el.value:this.el.innerHTML)(),onUpdate(){h(this.getHTML()),m(this.view.dom)},onCreate(){m(this.view.dom)},onFocus:async()=>{s.Z.timeout(1),this.toolbar_el?.classList.add("tiptap-focus"),this.toolbar_el&&o.Z.set_data(this.toolbar_el,"tiptap-instance",this)},onBlur:()=>{this.toolbar_el?.classList.remove("tiptap-focus")},autofocus:l}),v.init_post({app:this}),document.addEventListener("pat-modal-ready",(t=>{this.current_modal=t.target}))}}u.Z.register(p)},43468:function(t,n,e){var r={};e.r(r),e.d(r,{VERSION:function(){return o},after:function(){return Fn},all:function(){return re},allKeys:function(){return bt},any:function(){return ie},assign:function(){return Bt},before:function(){return In},bind:function(){return jn},bindAll:function(){return En},chain:function(){return wn},chunk:function(){return qe},clone:function(){return qt},collect:function(){return Xn},compact:function(){return Ce},compose:function(){return Bn},constant:function(){return tt},contains:function(){return ue},countBy:function(){return ye},create:function(){return Rt},debounce:function(){return Ln},default:function(){return ze},defaults:function(){return Ft},defer:function(){return On},delay:function(){return Tn},detect:function(){return Gn},difference:function(){return Oe},drop:function(){return Me},each:function(){return Kn},escape:function(){return sn},every:function(){return re},extend:function(){return Pt},extendOwn:function(){return Bt},filter:function(){return ne},find:function(){return Gn},findIndex:function(){return Un},findKey:function(){return qn},findLastIndex:function(){return zn},findWhere:function(){return Jn},first:function(){return Se},flatten:function(){return Te},foldl:function(){return Yn},foldr:function(){return te},forEach:function(){return Kn},functions:function(){return Lt},get:function(){return Ht},groupBy:function(){return ve},has:function(){return Vt},head:function(){return Se},identity:function(){return Wt},include:function(){return ue},includes:function(){return ue},indexBy:function(){return be},indexOf:function(){return Vn},initial:function(){return je},inject:function(){return Yn},intersection:function(){return Pe},invert:function(){return Zt},invoke:function(){return oe},isArguments:function(){return X},isArray:function(){return G},isArrayBuffer:function(){return R},isBoolean:function(){return T},isDataView:function(){return W},isDate:function(){return P},isElement:function(){return O},isEmpty:function(){return lt},isEqual:function(){return vt},isError:function(){return F},isFinite:function(){return Q},isFunction:function(){return U},isMap:function(){return St},isMatch:function(){return ft},isNaN:function(){return Y},isNull:function(){return E},isNumber:function(){return N},isObject:function(){return M},isRegExp:function(){return B},isSet:function(){return Et},isString:function(){return L},isSymbol:function(){return I},isTypedArray:function(){return ot},isUndefined:function(){return C},isWeakMap:function(){return Mt},isWeakSet:function(){return Ct},iteratee:function(){return Qt},keys:function(){return st},last:function(){return Ee},lastIndexOf:function(){return Wn},map:function(){return Xn},mapObject:function(){return tn},matcher:function(){return Gt},matches:function(){return Gt},max:function(){return se},memoize:function(){return Cn},methods:function(){return Lt},min:function(){return le},mixin:function(){return Ue},negate:function(){return Pn},noop:function(){return nn},now:function(){return on},object:function(){return Ie},omit:function(){return ke},once:function(){return Rn},pairs:function(){return Ot},partial:function(){return kn},partition:function(){return _e},pick:function(){return xe},pluck:function(){return ae},property:function(){return Jt},propertyOf:function(){return en},random:function(){return un},range:function(){return Re},reduce:function(){return Yn},reduceRight:function(){return te},reject:function(){return ee},rest:function(){return Me},restArguments:function(){return S},result:function(){return bn},sample:function(){return he},select:function(){return ne},shuffle:function(){return de},size:function(){return we},some:function(){return ie},sortBy:function(){return ge},sortedIndex:function(){return $n},tail:function(){return Me},take:function(){return Se},tap:function(){return Dt},template:function(){return vn},templateSettings:function(){return fn},throttle:function(){return Zn},times:function(){return rn},toArray:function(){return pe},toPath:function(){return Ut},transpose:function(){return Be},unescape:function(){return ln},union:function(){return Ne},uniq:function(){return Le},unique:function(){return Le},uniqueId:function(){return _n},unzip:function(){return Be},values:function(){return Tt},where:function(){return ce},without:function(){return Ze},wrap:function(){return Nn},zip:function(){return Fe}});var i=e(83579),u=e.n(i),o="1.13.6",a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},c=Array.prototype,s=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,f=c.push,p=c.slice,h=s.toString,d=s.hasOwnProperty,g="undefined"!=typeof ArrayBuffer,m="undefined"!=typeof DataView,v=Array.isArray,b=Object.keys,y=Object.create,_=g&&ArrayBuffer.isView,w=isNaN,A=isFinite,x=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=Math.pow(2,53)-1;function S(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var u=Array(n+1);for(i=0;i<n;i++)u[i]=arguments[i];return u[n]=r,t.apply(this,u)}}function M(t){var n=typeof t;return"function"===n||"object"===n&&!!t}function E(t){return null===t}function C(t){return void 0===t}function T(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)}function O(t){return!(!t||1!==t.nodeType)}function Z(t){var n="[object "+t+"]";return function(t){return h.call(t)===n}}var L=Z("String"),N=Z("Number"),P=Z("Date"),B=Z("RegExp"),F=Z("Error"),I=Z("Symbol"),R=Z("ArrayBuffer"),q=Z("Function"),D=a.document&&a.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof D&&(q=function(t){return"function"==typeof t||!1});var U=q,z=Z("Object"),$=m&&z(new DataView(new ArrayBuffer(8))),H="undefined"!=typeof Map&&z(new Map),V=Z("DataView");var W=$?function(t){return null!=t&&U(t.getInt8)&&R(t.buffer)}:V,G=v||Z("Array");function J(t,n){return null!=t&&d.call(t,n)}var K=Z("Arguments");!function(){K(arguments)||(K=function(t){return J(t,"callee")})}();var X=K;function Q(t){return!I(t)&&A(t)&&!isNaN(parseFloat(t))}function Y(t){return N(t)&&w(t)}function tt(t){return function(){return t}}function nt(t){return function(n){var e=t(n);return"number"==typeof e&&e>=0&&e<=j}}function et(t){return function(n){return null==n?void 0:n[t]}}var rt=et("byteLength"),it=nt(rt),ut=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var ot=g?function(t){return _?_(t)&&!W(t):it(t)&&ut.test(h.call(t))}:tt(!1),at=et("length");function ct(t,n){n=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(t){return!0===n[t]},push:function(e){return n[e]=!0,t.push(e)}}}(n);var e=k.length,r=t.constructor,i=U(r)&&r.prototype||s,u="constructor";for(J(t,u)&&!n.contains(u)&&n.push(u);e--;)(u=k[e])in t&&t[u]!==i[u]&&!n.contains(u)&&n.push(u)}function st(t){if(!M(t))return[];if(b)return b(t);var n=[];for(var e in t)J(t,e)&&n.push(e);return x&&ct(t,n),n}function lt(t){if(null==t)return!0;var n=at(t);return"number"==typeof n&&(G(t)||L(t)||X(t))?0===n:0===at(st(t))}function ft(t,n){var e=st(n),r=e.length;if(null==t)return!r;for(var i=Object(t),u=0;u<r;u++){var o=e[u];if(n[o]!==i[o]||!(o in i))return!1}return!0}function pt(t){return t instanceof pt?t:this instanceof pt?void(this._wrapped=t):new pt(t)}function ht(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,rt(t))}pt.VERSION=o,pt.prototype.value=function(){return this._wrapped},pt.prototype.valueOf=pt.prototype.toJSON=pt.prototype.value,pt.prototype.toString=function(){return String(this._wrapped)};var dt="[object DataView]";function gt(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var i=typeof t;return("function"===i||"object"===i||"object"==typeof n)&&mt(t,n,e,r)}function mt(t,n,e,r){t instanceof pt&&(t=t._wrapped),n instanceof pt&&(n=n._wrapped);var i=h.call(t);if(i!==h.call(n))return!1;if($&&"[object Object]"==i&&W(t)){if(!W(n))return!1;i=dt}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return l.valueOf.call(t)===l.valueOf.call(n);case"[object ArrayBuffer]":case dt:return mt(ht(t),ht(n),e,r)}var u="[object Array]"===i;if(!u&&ot(t)){if(rt(t)!==rt(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;u=!0}if(!u){if("object"!=typeof t||"object"!=typeof n)return!1;var o=t.constructor,a=n.constructor;if(o!==a&&!(U(o)&&o instanceof o&&U(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];for(var c=(e=e||[]).length;c--;)if(e[c]===t)return r[c]===n;if(e.push(t),r.push(n),u){if((c=t.length)!==n.length)return!1;for(;c--;)if(!gt(t[c],n[c],e,r))return!1}else{var s,f=st(t);if(c=f.length,st(n).length!==c)return!1;for(;c--;)if(!J(n,s=f[c])||!gt(t[s],n[s],e,r))return!1}return e.pop(),r.pop(),!0}function vt(t,n){return gt(t,n)}function bt(t){if(!M(t))return[];var n=[];for(var e in t)n.push(e);return x&&ct(t,n),n}function yt(t){var n=at(t);return function(e){if(null==e)return!1;var r=bt(e);if(at(r))return!1;for(var i=0;i<n;i++)if(!U(e[t[i]]))return!1;return t!==kt||!U(e[_t])}}var _t="forEach",wt=["clear","delete"],At=["get","has","set"],xt=wt.concat(_t,At),kt=wt.concat(At),jt=["add"].concat(wt,_t,"has"),St=H?yt(xt):Z("Map"),Mt=H?yt(kt):Z("WeakMap"),Et=H?yt(jt):Z("Set"),Ct=Z("WeakSet");function Tt(t){for(var n=st(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=t[n[i]];return r}function Ot(t){for(var n=st(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=[n[i],t[n[i]]];return r}function Zt(t){for(var n={},e=st(t),r=0,i=e.length;r<i;r++)n[t[e[r]]]=e[r];return n}function Lt(t){var n=[];for(var e in t)U(t[e])&&n.push(e);return n.sort()}function Nt(t,n){return function(e){var r=arguments.length;if(n&&(e=Object(e)),r<2||null==e)return e;for(var i=1;i<r;i++)for(var u=arguments[i],o=t(u),a=o.length,c=0;c<a;c++){var s=o[c];n&&void 0!==e[s]||(e[s]=u[s])}return e}}var Pt=Nt(bt),Bt=Nt(st),Ft=Nt(bt,!0);function It(t){if(!M(t))return{};if(y)return y(t);var n=function(){};n.prototype=t;var e=new n;return n.prototype=null,e}function Rt(t,n){var e=It(t);return n&&Bt(e,n),e}function qt(t){return M(t)?G(t)?t.slice():Pt({},t):t}function Dt(t,n){return n(t),t}function Ut(t){return G(t)?t:[t]}function zt(t){return pt.toPath(t)}function $t(t,n){for(var e=n.length,r=0;r<e;r++){if(null==t)return;t=t[n[r]]}return e?t:void 0}function Ht(t,n,e){var r=$t(t,zt(n));return C(r)?e:r}function Vt(t,n){for(var e=(n=zt(n)).length,r=0;r<e;r++){var i=n[r];if(!J(t,i))return!1;t=t[i]}return!!e}function Wt(t){return t}function Gt(t){return t=Bt({},t),function(n){return ft(n,t)}}function Jt(t){return t=zt(t),function(n){return $t(n,t)}}function Kt(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,u){return t.call(n,e,r,i,u)}}return function(){return t.apply(n,arguments)}}function Xt(t,n,e){return null==t?Wt:U(t)?Kt(t,n,e):M(t)&&!G(t)?Gt(t):Jt(t)}function Qt(t,n){return Xt(t,n,1/0)}function Yt(t,n,e){return pt.iteratee!==Qt?pt.iteratee(t,n):Xt(t,n,e)}function tn(t,n,e){n=Yt(n,e);for(var r=st(t),i=r.length,u={},o=0;o<i;o++){var a=r[o];u[a]=n(t[a],a,t)}return u}function nn(){}function en(t){return null==t?nn:function(n){return Ht(t,n)}}function rn(t,n,e){var r=Array(Math.max(0,t));n=Kt(n,e,1);for(var i=0;i<t;i++)r[i]=n(i);return r}function un(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))}pt.toPath=Ut,pt.iteratee=Qt;var on=Date.now||function(){return(new Date).getTime()};function an(t){var n=function(n){return t[n]},e="(?:"+st(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}}var cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},sn=an(cn),ln=an(Zt(cn)),fn=pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},pn=/(.)^/,hn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},dn=/\\|'|\r|\n|\u2028|\u2029/g;function gn(t){return"\\"+hn[t]}var mn=/^\s*(\w|\$)+\s*$/;function vn(t,n,e){!n&&e&&(n=e),n=Ft({},n,pt.templateSettings);var r=RegExp([(n.escape||pn).source,(n.interpolate||pn).source,(n.evaluate||pn).source].join("|")+"|$","g"),i=0,u="__p+='";t.replace(r,(function(n,e,r,o,a){return u+=t.slice(i,a).replace(dn,gn),i=a+n.length,e?u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(u+="';\n"+o+"\n__p+='"),n})),u+="';\n";var o,a=n.variable;if(a){if(!mn.test(a))throw new Error("variable is not a bare identifier: "+a)}else u="with(obj||{}){\n"+u+"}\n",a="obj";u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{o=new Function(a,"_",u)}catch(t){throw t.source=u,t}var c=function(t){return o.call(this,t,pt)};return c.source="function("+a+"){\n"+u+"}",c}function bn(t,n,e){var r=(n=zt(n)).length;if(!r)return U(e)?e.call(t):e;for(var i=0;i<r;i++){var u=null==t?void 0:t[n[i]];void 0===u&&(u=e,i=r),t=U(u)?u.call(t):u}return t}var yn=0;function _n(t){var n=++yn+"";return t?t+n:n}function wn(t){var n=pt(t);return n._chain=!0,n}function An(t,n,e,r,i){if(!(r instanceof n))return t.apply(e,i);var u=It(t.prototype),o=t.apply(u,i);return M(o)?o:u}var xn=S((function(t,n){var e=xn.placeholder,r=function(){for(var i=0,u=n.length,o=Array(u),a=0;a<u;a++)o[a]=n[a]===e?arguments[i++]:n[a];for(;i<arguments.length;)o.push(arguments[i++]);return An(t,r,this,this,o)};return r}));xn.placeholder=pt;var kn=xn,jn=S((function(t,n,e){if(!U(t))throw new TypeError("Bind must be called on a function");var r=S((function(i){return An(t,r,n,this,e.concat(i))}));return r})),Sn=nt(at);function Mn(t,n,e,r){if(r=r||[],n||0===n){if(n<=0)return r.concat(t)}else n=1/0;for(var i=r.length,u=0,o=at(t);u<o;u++){var a=t[u];if(Sn(a)&&(G(a)||X(a)))if(n>1)Mn(a,n-1,e,r),i=r.length;else for(var c=0,s=a.length;c<s;)r[i++]=a[c++];else e||(r[i++]=a)}return r}var En=S((function(t,n){var e=(n=Mn(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=n[e];t[r]=jn(t[r],t)}return t}));function Cn(t,n){var e=function(r){var i=e.cache,u=""+(n?n.apply(this,arguments):r);return J(i,u)||(i[u]=t.apply(this,arguments)),i[u]};return e.cache={},e}var Tn=S((function(t,n,e){return setTimeout((function(){return t.apply(null,e)}),n)})),On=kn(Tn,pt,1);function Zn(t,n,e){var r,i,u,o,a=0;e||(e={});var c=function(){a=!1===e.leading?0:on(),r=null,o=t.apply(i,u),r||(i=u=null)},s=function(){var s=on();a||!1!==e.leading||(a=s);var l=n-(s-a);return i=this,u=arguments,l<=0||l>n?(r&&(clearTimeout(r),r=null),a=s,o=t.apply(i,u),r||(i=u=null)):r||!1===e.trailing||(r=setTimeout(c,l)),o};return s.cancel=function(){clearTimeout(r),a=0,r=i=u=null},s}function Ln(t,n,e){var r,i,u,o,a,c=function(){var s=on()-i;n>s?r=setTimeout(c,n-s):(r=null,e||(o=t.apply(a,u)),r||(u=a=null))},s=S((function(s){return a=this,u=s,i=on(),r||(r=setTimeout(c,n),e&&(o=t.apply(a,u))),o}));return s.cancel=function(){clearTimeout(r),r=u=a=null},s}function Nn(t,n){return kn(n,t)}function Pn(t){return function(){return!t.apply(this,arguments)}}function Bn(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}}function Fn(t,n){return function(){if(--t<1)return n.apply(this,arguments)}}function In(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=null),e}}var Rn=kn(In,2);function qn(t,n,e){n=Yt(n,e);for(var r,i=st(t),u=0,o=i.length;u<o;u++)if(n(t[r=i[u]],r,t))return r}function Dn(t){return function(n,e,r){e=Yt(e,r);for(var i=at(n),u=t>0?0:i-1;u>=0&&u<i;u+=t)if(e(n[u],u,n))return u;return-1}}var Un=Dn(1),zn=Dn(-1);function $n(t,n,e,r){for(var i=(e=Yt(e,r,1))(n),u=0,o=at(t);u<o;){var a=Math.floor((u+o)/2);e(t[a])<i?u=a+1:o=a}return u}function Hn(t,n,e){return function(r,i,u){var o=0,a=at(r);if("number"==typeof u)t>0?o=u>=0?u:Math.max(u+a,o):a=u>=0?Math.min(u+1,a):u+a+1;else if(e&&u&&a)return r[u=e(r,i)]===i?u:-1;if(i!=i)return(u=n(p.call(r,o,a),Y))>=0?u+o:-1;for(u=t>0?o:a-1;u>=0&&u<a;u+=t)if(r[u]===i)return u;return-1}}var Vn=Hn(1,Un,$n),Wn=Hn(-1,zn);function Gn(t,n,e){var r=(Sn(t)?Un:qn)(t,n,e);if(void 0!==r&&-1!==r)return t[r]}function Jn(t,n){return Gn(t,Gt(n))}function Kn(t,n,e){var r,i;if(n=Kt(n,e),Sn(t))for(r=0,i=t.length;r<i;r++)n(t[r],r,t);else{var u=st(t);for(r=0,i=u.length;r<i;r++)n(t[u[r]],u[r],t)}return t}function Xn(t,n,e){n=Yt(n,e);for(var r=!Sn(t)&&st(t),i=(r||t).length,u=Array(i),o=0;o<i;o++){var a=r?r[o]:o;u[o]=n(t[a],a,t)}return u}function Qn(t){return function(n,e,r,i){var u=arguments.length>=3;return function(n,e,r,i){var u=!Sn(n)&&st(n),o=(u||n).length,a=t>0?0:o-1;for(i||(r=n[u?u[a]:a],a+=t);a>=0&&a<o;a+=t){var c=u?u[a]:a;r=e(r,n[c],c,n)}return r}(n,Kt(e,i,4),r,u)}}var Yn=Qn(1),te=Qn(-1);function ne(t,n,e){var r=[];return n=Yt(n,e),Kn(t,(function(t,e,i){n(t,e,i)&&r.push(t)})),r}function ee(t,n,e){return ne(t,Pn(Yt(n)),e)}function re(t,n,e){n=Yt(n,e);for(var r=!Sn(t)&&st(t),i=(r||t).length,u=0;u<i;u++){var o=r?r[u]:u;if(!n(t[o],o,t))return!1}return!0}function ie(t,n,e){n=Yt(n,e);for(var r=!Sn(t)&&st(t),i=(r||t).length,u=0;u<i;u++){var o=r?r[u]:u;if(n(t[o],o,t))return!0}return!1}function ue(t,n,e,r){return Sn(t)||(t=Tt(t)),("number"!=typeof e||r)&&(e=0),Vn(t,n,e)>=0}var oe=S((function(t,n,e){var r,i;return U(n)?i=n:(n=zt(n),r=n.slice(0,-1),n=n[n.length-1]),Xn(t,(function(t){var u=i;if(!u){if(r&&r.length&&(t=$t(t,r)),null==t)return;u=t[n]}return null==u?u:u.apply(t,e)}))}));function ae(t,n){return Xn(t,Jt(n))}function ce(t,n){return ne(t,Gt(n))}function se(t,n,e){var r,i,u=-1/0,o=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Sn(t)?t:Tt(t)).length;a<c;a++)null!=(r=t[a])&&r>u&&(u=r);else n=Yt(n,e),Kn(t,(function(t,e,r){((i=n(t,e,r))>o||i===-1/0&&u===-1/0)&&(u=t,o=i)}));return u}function le(t,n,e){var r,i,u=1/0,o=1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=Sn(t)?t:Tt(t)).length;a<c;a++)null!=(r=t[a])&&r<u&&(u=r);else n=Yt(n,e),Kn(t,(function(t,e,r){((i=n(t,e,r))<o||i===1/0&&u===1/0)&&(u=t,o=i)}));return u}var fe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pe(t){return t?G(t)?p.call(t):L(t)?t.match(fe):Sn(t)?Xn(t,Wt):Tt(t):[]}function he(t,n,e){if(null==n||e)return Sn(t)||(t=Tt(t)),t[un(t.length-1)];var r=pe(t),i=at(r);n=Math.max(Math.min(n,i),0);for(var u=i-1,o=0;o<n;o++){var a=un(o,u),c=r[o];r[o]=r[a],r[a]=c}return r.slice(0,n)}function de(t){return he(t,1/0)}function ge(t,n,e){var r=0;return n=Yt(n,e),ae(Xn(t,(function(t,e,i){return{value:t,index:r++,criteria:n(t,e,i)}})).sort((function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index-n.index})),"value")}function me(t,n){return function(e,r,i){var u=n?[[],[]]:{};return r=Yt(r,i),Kn(e,(function(n,i){var o=r(n,i,e);t(u,n,o)})),u}}var ve=me((function(t,n,e){J(t,e)?t[e].push(n):t[e]=[n]})),be=me((function(t,n,e){t[e]=n})),ye=me((function(t,n,e){J(t,e)?t[e]++:t[e]=1})),_e=me((function(t,n,e){t[e?0:1].push(n)}),!0);function we(t){return null==t?0:Sn(t)?t.length:st(t).length}function Ae(t,n,e){return n in e}var xe=S((function(t,n){var e={},r=n[0];if(null==t)return e;U(r)?(n.length>1&&(r=Kt(r,n[1])),n=bt(t)):(r=Ae,n=Mn(n,!1,!1),t=Object(t));for(var i=0,u=n.length;i<u;i++){var o=n[i],a=t[o];r(a,o,t)&&(e[o]=a)}return e})),ke=S((function(t,n){var e,r=n[0];return U(r)?(r=Pn(r),n.length>1&&(e=n[1])):(n=Xn(Mn(n,!1,!1),String),r=function(t,e){return!ue(n,e)}),xe(t,r,e)}));function je(t,n,e){return p.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))}function Se(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[0]:je(t,t.length-n)}function Me(t,n,e){return p.call(t,null==n||e?1:n)}function Ee(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[t.length-1]:Me(t,Math.max(0,t.length-n))}function Ce(t){return ne(t,Boolean)}function Te(t,n){return Mn(t,n,!1)}var Oe=S((function(t,n){return n=Mn(n,!0,!0),ne(t,(function(t){return!ue(n,t)}))})),Ze=S((function(t,n){return Oe(t,n)}));function Le(t,n,e,r){T(n)||(r=e,e=n,n=!1),null!=e&&(e=Yt(e,r));for(var i=[],u=[],o=0,a=at(t);o<a;o++){var c=t[o],s=e?e(c,o,t):c;n&&!e?(o&&u===s||i.push(c),u=s):e?ue(u,s)||(u.push(s),i.push(c)):ue(i,c)||i.push(c)}return i}var Ne=S((function(t){return Le(Mn(t,!0,!0))}));function Pe(t){for(var n=[],e=arguments.length,r=0,i=at(t);r<i;r++){var u=t[r];if(!ue(n,u)){var o;for(o=1;o<e&&ue(arguments[o],u);o++);o===e&&n.push(u)}}return n}function Be(t){for(var n=t&&se(t,at).length||0,e=Array(n),r=0;r<n;r++)e[r]=ae(t,r);return e}var Fe=S(Be);function Ie(t,n){for(var e={},r=0,i=at(t);r<i;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e}function Re(t,n,e){null==n&&(n=t||0,t=0),e||(e=n<t?-1:1);for(var r=Math.max(Math.ceil((n-t)/e),0),i=Array(r),u=0;u<r;u++,t+=e)i[u]=t;return i}function qe(t,n){if(null==n||n<1)return[];for(var e=[],r=0,i=t.length;r<i;)e.push(p.call(t,r,r+=n));return e}function De(t,n){return t._chain?pt(n).chain():n}function Ue(t){return Kn(Lt(t),(function(n){var e=pt[n]=t[n];pt.prototype[n]=function(){var t=[this._wrapped];return f.apply(t,arguments),De(this,e.apply(pt,t))}})),pt}Kn(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=c[t];pt.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),De(this,e)}})),Kn(["concat","join","slice"],(function(t){var n=c[t];pt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=n.apply(t,arguments)),De(this,t)}}));var ze=pt,$e=Ue(r);$e._=$e;var He=$e,Ve=e(35500),We=e(70542),Ge=e(57467),Je=e(4258),Ke=e(94791);const Xe=Je.Z.getLogger("pat-upload"),Qe=new Ke.Z("upload");Qe.add_argument("concurrent-uploads","multiple",["multiple","single"]),Qe.add_argument("ajax-upload",!0),Qe.add_argument("post-upload",!0),Qe.add_argument("class-name","upload"),Qe.add_argument("clickable","true"),Qe.add_argument("current-path"),Qe.add_argument("label","Drop files hereâ€¦"),Qe.add_argument("name","file"),Qe.add_argument("previews-container",".previews"),Qe.add_argument("timeout",12e4),Qe.add_argument("trigger","button"),Qe.add_argument("url"),Qe.add_argument("headers");We.Z.extend({name:"upload",trigger:".pat-upload",parser:"patternslib",defaults:{addRemoveLinks:!1,maxFiles:null,maxFilesize:99999999,previewTemplate:null},template_preview:null,async init(t,n){window.__patternslib_import_styles&&e.e(51607).then(e.bind(e,51607));const r=(await e.e(32025).then(e.t.bind(e,32025,23))).default;r.autoDiscover=!1,this.template_preview=(await e.e(92910).then(e.t.bind(e,92910,17))).default;const i=(await e.e(25109).then(e.t.bind(e,25109,17))).default;this.cfgs=He.extend(He.clone(this.defaults),Qe.parse(t,n,!0)[0]),this.$el.addClass(this.cfgs.className),this.$el.append(He.template(i)({_t:Ve.Z,label:(0,Ve.Z)(this.cfgs.label)})),this.cfgs.ajaxUpload||u()(".fallback",this.$el).remove();try{this.dropzone=new r(u()(".upload-area",this.$el)[0],this.getDzoneOptions())}catch(t){throw Xe.error(t),t}this.registerHandlers()},refresh(){const t=this.el.closest(".pat-subform");if(t){Xe.debug("Refresh subform");const n=t.querySelector("button[type='submit']");n?.click()}else{const t=this.el.closest("form");t&&t.matches(".pat-inject")&&(Xe.debug("Refresh form"),t.dispatchEvent(Ge.Z.submit_event()))}},registerHandlers(){this.dropzone.on("complete",u().proxy((function(t){this.cfgs.postUpload&&setTimeout((function(){u()(t.previewElement).fadeOut()}),1e3),0===He.filter(this.dropzone.files,(function(t){return"success"!==t.status})).length&&this.refresh()}),this))},getUrl(){let t=this.cfgs.url;if(!t){const n=this.$el.closest("form");t=n.length>0?n.attr("action"):window.location.href}return t},getDzoneOptions(){"string"==typeof this.cfgs.clickable&&(this.cfgs.clickable="true"===this.cfgs.clickable);const t=u().extend({},this.cfgs);if(delete t.postUpload,this.cfgs.previewsContainer){const n=this.$el.find(this.cfgs.previewsContainer);n.length>0&&(t.previewsContainer=n[0])}t.url=this.getUrl(),t.uploadMultiple="multiple"===t.concurrentUploads,t.previewTemplate=this.template_preview;try{this.cfgs.headers&&(t.headers=JSON.parse(this.cfgs.headers))}catch(t){Xe.warn("Could not parse the headers option")}return t}})}}]);
//# sourceMappingURL=85595.42b8f47e728daf46d017.min.js.map