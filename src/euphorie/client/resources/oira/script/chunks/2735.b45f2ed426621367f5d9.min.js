"use strict";(self.webpackChunkoira_prototype=self.webpackChunkoira_prototype||[]).push([[2735],{72735:function(t,e,s){s.r(e),s.d(e,{parser:function(){return h}});s(35666),s(53273);var o=s(10878),i=s.n(o),l=s(39191),r=s(89867),n=s(40705),a=s(19513);const c=r.Z.getLogger("pat.scroll"),h=new n.Z("scroll");h.addArgument("trigger","click",["click","auto","manual"]),h.addArgument("direction","top",["top","left"]),h.addArgument("selector"),h.addArgument("offset",0),h.addArgument("delay"),e.default=l.Z.extend({name:"scroll",trigger:".pat-scroll",jquery_plugin:!0,async init(t,e){if(this.options=h.parse(this.$el,e),this.options.delay&&(this.options.delay=a.Z.parseTime(this.options.delay)),"auto"===this.options.trigger){(0,(await s.e(7564).then(s.t.bind(s,77564,23))).default)(document.body,(()=>this.smoothScroll()))}"auto"!==this.options.trigger&&"click"!==this.options.trigger||this.el.addEventListener("click",this.onClick.bind(this)),this.$el.on("pat-update",this.onPatternsUpdate.bind(this)),this.markBasedOnFragment(),this.on("hashchange",this.clearIfHidden.bind(this)),i()(window).scroll(a.Z.debounce(this.markIfVisible.bind(this),50))},onClick(){history.pushState({},null,this.$el.attr("href")),this.smoothScroll(),this.markBasedOnFragment(),i()("a.pat-scroll").trigger("hashchange")},markBasedOnFragment(){const t=window.location.hash.substr(1);if(t){const e=i()("#"+t);this.$el.addClass("current"),e.addClass("current")}},clearIfHidden(){const t="#"+window.location.hash.substr(1),e=i()(t),s="#"+this.$el[0].href.split("#").pop();if(e.length>0&&t!=s){i()("#"+this.$el[0].href.split("#").pop()).removeClass("current"),this.$el.removeClass("current")}},markIfVisible(){if(this.$el.hasClass("pat-scroll-animated"))this.$el.removeClass("pat-scroll-animated");else if("A"===this.$el[0].nodeName){const t=this.$el[0].href,e=-1!==t.indexOf("#")&&t.split("#").pop()||void 0;if(e){const t=i()("#"+e);t.length&&(a.Z.isElementInViewport(t[0],!0,this.options.offset)&&(t.addClass("current"),this.$el.addClass("current")),i()(this.$el).trigger("pat-update",{pattern:"scroll"}))}}},onPatternsUpdate(t,e){if("stacks"===e?.pattern)e.originalEvent&&"click"===e.originalEvent.type&&this.smoothScroll();else if("scroll"===e?.pattern){const t=this.$el[0].href,e=-1!==t.indexOf("#")&&t.split("#").pop()||void 0;if(e){const t=i()("#"+e);t.length&&(a.Z.isElementInViewport(t[0],!0,this.options.offset)||(t.removeClass("current"),i()(this.$el).removeClass("current")))}}},findScrollContainer(t){const e=this.options.direction;let s=i()(t).parents().filter(((t,s)=>["auto","scroll"].indexOf(i()(s).css("overflow"))>-1||"top"===e&&["auto","scroll"].indexOf(i()(s).css("overflow-y"))>-1||"left"===e&&["auto","scroll"].indexOf(i()(s).css("overflow-x"))>-1)).first();return void 0===s[0]&&(s=i()("body")),s},_get_selector_target(){const t=this.options.selector;return!t&&this.el.href?.includes("#")?document.querySelector(`#${this.el.href.split("#").pop()}`):t&&"self"!==t?document.querySelector(t):this.el},async smoothScroll(){this.options.delay&&await a.Z.timeout(this.options.delay);const t="top"==this.options.direction?"scrollTop":"scrollLeft",e={};let s;if("top"===this.options.selector)s=this.findScrollContainer(this.$el),e[t]=0;else if("bottom"===this.options.selector)s=this.findScrollContainer(this.$el),"scrollTop"===t?e.scrollTop=s[0].scrollHeight:e.scrollLeft=s[0].scrollWidth;else{const o=i()(this._get_selector_target());if(!o.length)return;s=this.findScrollContainer(o),s[0]===document.body?e[t]="scrollTop"===t?Math.floor(o.safeOffset().top):Math.floor(o.safeOffset().left):e[t]="scrollTop"===t?Math.floor(s.scrollTop()+o.safeOffset().top-s.safeOffset().top):Math.floor(s.scrollLeft()+o.safeOffset().left-s.safeOffset().left)}e[t]-=this.options.offset,s[0]===document.body&&(s=i()("html")),await s.animate(e,{duration:500,start:()=>{i()(".pat-scroll").addClass("pat-scroll-animated"),c.debug("scrolling.")}}).promise()}})}}]);