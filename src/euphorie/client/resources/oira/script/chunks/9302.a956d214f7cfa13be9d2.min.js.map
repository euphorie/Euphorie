{"version":3,"file":"chunks/9302.a956d214f7cfa13be9d2.min.js","mappings":"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","sources":["webpack://oira.prototype/./node_modules/prosemirror-dropcursor/dist/index.es.js","webpack://oira.prototype/./node_modules/@tiptap/extension-dropcursor/dist/tiptap-extension-dropcursor.esm.js"],"sourcesContent":["import { Plugin } from 'prosemirror-state';\nimport { dropPoint } from 'prosemirror-transform';\n\n// :: (options: ?Object) â†’ Plugin\n// Create a plugin that, when added to a ProseMirror instance,\n// causes a decoration to show up at the drop position when something\n// is dragged over the editor.\n//\n// Nodes may add a `disableDropCursor` property to their spec to\n// control the showing of a drop cursor inside them. This may be a\n// boolean or a function, which will be called with a view and a\n// position, and should return a boolean.\n//\n//   options::- These options are supported:\n//\n//     color:: ?string\n//     The color of the cursor. Defaults to `black`.\n//\n//     width:: ?number\n//     The precise width of the cursor in pixels. Defaults to 1.\n//\n//     class:: ?string\n//     A CSS class name to add to the cursor element.\nfunction dropCursor(options) {\n  if ( options === void 0 ) options = {};\n\n  return new Plugin({\n    view: function view(editorView) { return new DropCursorView(editorView, options) }\n  })\n}\n\nvar DropCursorView = function DropCursorView(editorView, options) {\n  var this$1 = this;\n\n  this.editorView = editorView;\n  this.width = options.width || 1;\n  this.color = options.color || \"black\";\n  this.class = options.class;\n  this.cursorPos = null;\n  this.element = null;\n  this.timeout = null;\n\n  this.handlers = [\"dragover\", \"dragend\", \"drop\", \"dragleave\"].map(function (name) {\n    var handler = function (e) { return this$1[name](e); };\n    editorView.dom.addEventListener(name, handler);\n    return {name: name, handler: handler}\n  });\n};\n\nDropCursorView.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  this.handlers.forEach(function (ref) {\n      var name = ref.name;\n      var handler = ref.handler;\n\n      return this$1.editorView.dom.removeEventListener(name, handler);\n    });\n};\n\nDropCursorView.prototype.update = function update (editorView, prevState) {\n  if (this.cursorPos != null && prevState.doc != editorView.state.doc) {\n    if (this.cursorPos > editorView.state.doc.content.size) { this.setCursor(null); }\n    else { this.updateOverlay(); }\n  }\n};\n\nDropCursorView.prototype.setCursor = function setCursor (pos) {\n  if (pos == this.cursorPos) { return }\n  this.cursorPos = pos;\n  if (pos == null) {\n    this.element.parentNode.removeChild(this.element);\n    this.element = null;\n  } else {\n    this.updateOverlay();\n  }\n};\n\nDropCursorView.prototype.updateOverlay = function updateOverlay () {\n  var $pos = this.editorView.state.doc.resolve(this.cursorPos), rect;\n  if (!$pos.parent.inlineContent) {\n    var before = $pos.nodeBefore, after = $pos.nodeAfter;\n    if (before || after) {\n      var nodeRect = this.editorView.nodeDOM(this.cursorPos - (before ?before.nodeSize : 0)).getBoundingClientRect();\n      var top = before ? nodeRect.bottom : nodeRect.top;\n      if (before && after)\n        { top = (top + this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top) / 2; }\n      rect = {left: nodeRect.left, right: nodeRect.right, top: top - this.width / 2, bottom: top + this.width / 2};\n    }\n  }\n  if (!rect) {\n    var coords = this.editorView.coordsAtPos(this.cursorPos);\n    rect = {left: coords.left - this.width / 2, right: coords.left + this.width / 2, top: coords.top, bottom: coords.bottom};\n  }\n\n  var parent = this.editorView.dom.offsetParent;\n  if (!this.element) {\n    this.element = parent.appendChild(document.createElement(\"div\"));\n    if (this.class) { this.element.className = this.class; }\n    this.element.style.cssText = \"position: absolute; z-index: 50; pointer-events: none; background-color: \" + this.color;\n  }\n  var parentLeft, parentTop;\n  if (!parent || parent == document.body && getComputedStyle(parent).position == \"static\") {\n    parentLeft = -pageXOffset;\n    parentTop = -pageYOffset;\n  } else {\n    var rect$1 = parent.getBoundingClientRect();\n    parentLeft = rect$1.left - parent.scrollLeft;\n    parentTop = rect$1.top - parent.scrollTop;\n  }\n  this.element.style.left = (rect.left - parentLeft) + \"px\";\n  this.element.style.top = (rect.top - parentTop) + \"px\";\n  this.element.style.width = (rect.right - rect.left) + \"px\";\n  this.element.style.height = (rect.bottom - rect.top) + \"px\";\n};\n\nDropCursorView.prototype.scheduleRemoval = function scheduleRemoval (timeout) {\n    var this$1 = this;\n\n  clearTimeout(this.timeout);\n  this.timeout = setTimeout(function () { return this$1.setCursor(null); }, timeout);\n};\n\nDropCursorView.prototype.dragover = function dragover (event) {\n  if (!this.editorView.editable) { return }\n  var pos = this.editorView.posAtCoords({left: event.clientX, top: event.clientY});\n\n  var node = pos && pos.inside >= 0 && this.editorView.state.doc.nodeAt(pos.inside);\n  var disableDropCursor = node && node.type.spec.disableDropCursor;\n  var disabled = typeof disableDropCursor == \"function\" ? disableDropCursor(this.editorView, pos) : disableDropCursor;\n\n  if (pos && !disabled) {\n    var target = pos.pos;\n    if (this.editorView.dragging && this.editorView.dragging.slice) {\n      target = dropPoint(this.editorView.state.doc, target, this.editorView.dragging.slice);\n      if (target == null) { return this.setCursor(null) }\n    }\n    this.setCursor(target);\n    this.scheduleRemoval(5000);\n  }\n};\n\nDropCursorView.prototype.dragend = function dragend () {\n  this.scheduleRemoval(20);\n};\n\nDropCursorView.prototype.drop = function drop () {\n  this.scheduleRemoval(20);\n};\n\nDropCursorView.prototype.dragleave = function dragleave (event) {\n  if (event.target == this.editorView.dom || !this.editorView.dom.contains(event.relatedTarget))\n    { this.setCursor(null); }\n};\n\nexport { dropCursor };\n//# sourceMappingURL=index.es.js.map\n","import { Extension } from '@tiptap/core';\nimport { dropCursor } from 'prosemirror-dropcursor';\n\nconst Dropcursor = Extension.create({\r\n    name: 'dropCursor',\r\n    addOptions() {\r\n        return {\r\n            color: 'currentColor',\r\n            width: 1,\r\n            class: null,\r\n        };\r\n    },\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            dropCursor(this.options),\r\n        ];\r\n    },\r\n});\n\nexport { Dropcursor, Dropcursor as default };\n//# sourceMappingURL=tiptap-extension-dropcursor.esm.js.map\n"],"names":["DropCursorView","editorView","options","this$1","this","width","color","class","cursorPos","element","timeout","handlers","map","name","handler","e","dom","addEventListener","prototype","destroy","forEach","ref","removeEventListener","update","prevState","doc","state","content","size","setCursor","updateOverlay","pos","parentNode","removeChild","rect","$pos","resolve","parent","inlineContent","before","nodeBefore","after","nodeAfter","nodeRect","nodeDOM","nodeSize","getBoundingClientRect","top","bottom","left","right","coords","coordsAtPos","parentLeft","parentTop","offsetParent","appendChild","document","createElement","className","style","cssText","body","getComputedStyle","position","pageXOffset","pageYOffset","rect$1","scrollLeft","scrollTop","height","scheduleRemoval","clearTimeout","setTimeout","dragover","event","editable","posAtCoords","clientX","clientY","node","inside","nodeAt","disableDropCursor","type","spec","disabled","target","dragging","slice","dragend","drop","dragleave","contains","relatedTarget","Dropcursor","Extension","addOptions","addProseMirrorPlugins","view"],"sourceRoot":""}