(self.webpackChunkoira_prototype=self.webpackChunkoira_prototype||[]).push([[2677],{82677:function(){!function(){function t(t,e){return(" "+t.className+" ").replace(this._whitespace," ").indexOf(e)>=0}function e(e,i){t(e,i)||(e.className+=" "+i)}function i(t,e){for(var i=t.className.split(/\s+/),n=0;n<i.length;n++)if(i[n]===e)return i.splice(n,1),void(t.className=i.join(" "))}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function s(){this.listeners=[]}function o(t,e,i,n){this.presentation=t,this.element=e,this.id=e.id,this.active=!!i,this.number=n,e.addEventListener("click",this._onClick.bind(this))}function l(t){this.presentation=t,this.events=new s,this.time_start=new Date}s.prototype={add:function(t,e,i,n){var s=i.bind(n);this.listeners.push({el:t,type:e,handler:i,bound_handler:s}),t.addEventListener(e,s)},remove:function(t,e,i){for(var n,s=0;s<this.listeners.length;s++)if((n=this.listeners[s]).el===t&&n.type===e&&n.handler===i){n.el.removeEventListener(n.type,n.bound_handler),this.listeners.splice(s,1);break}},removeAll:function(){for(var t,e=0;e<this.listeners.length;e++)(t=this.listeners[e]).el.removeEventListener(t.type,t.bound_handler);this.listeners=[]}},o.prototype={title:function(){var t=this.element.querySelector(this.presentation.config.slide_title_selector);return null!==t?t.textContent:null},notes:function(){return this.element.querySelector(this.presentation.config.slide_notes_selector)},_onClick:function(){this.presentation._showSlide(this)},_markActive:function(){this.active=!0,e(this.element,"active")},_markInactive:function(){this.active=!1,i(this.element,"active")}},l.prototype={window:null,document:null,timer_inter:null,time_start:null,global_onunload:null,show:function(t){return(null===this.window||this.window.closed)&&(this.window=window.open("about:blank","presenter-notes","menubar=no,personalbar=no,location=no,status=no")),null!==this.window&&(this.document=this.window.document,this.events.add(this.document,"keydown",this.presentation._onKey,this.presentation),this._addContent(),this.update(),this._startTimer(),this.global_onunload=window.onunload,window.onunload=this._onUnload.bind(this),!0)},hide:function(t){this.events.removeAll(),this._stopTimer(),window.onunload=this.global_ununload,null!==this.window&&(this.window.closed||this.window.close(),this.window=null,this.document=null)},update:function(){if(this.isOpen()){var t=this.presentation.current_slide_index+1;this.document.querySelector("#slide .current").firstChild.textContent=t.toString();for(var e=this.presentation.slides[this.presentation.current_slide_index].notes(),i=this.document.getElementById("notes");i.hasChildNodes();)i.removeChild(i.firstChild);if(e&&e.childElementCount){for(var n,s,o=e.children,l=0;l<o.length;l++)i.appendChild(this.document.importNode(o[l],!0));for(var r=e;!(null===r||n&&s);r=r.parentElement)!n&&r.dir&&(n=r.dir),!s&&r.lang&&(s=r.lang);i.dir=n||"",i.lang=s||""}}},isOpen:function(){return this.window&&!this.window.closed},_addContent:function(){var t,e,i,n=this.document.body;n.id="presentor-notes",(t=this.document.createElement("header")).className="meta",(e=this.document.createElement("div")).id="slide",(i=this.document.createElement("span")).className="current",i.appendChild(this.document.createTextNode(this.presentation.current_slide_index+1)),e.appendChild(i),i.appendChild(this.document.createTextNode("/")),(i=this.document.createElement("span")).className="total",i.appendChild(this.document.createTextNode(this.presentation.slides.length)),e.appendChild(i),t.appendChild(e),(e=this.document.createElement("timer")).id="timer",e.appendChild(this.document.createTextNode("00:00:00")),t.appendChild(e),n.appendChild(t),(e=this.document.createElement("section")).id="notes",n.appendChild(e)},_onUnload:function(){null!==this.global_onunload&&this.global_onunload(),this.hide()},_startTimer:function(){this.timer_interval=setInterval(this._updateTimer.bind(this),1e3),this._updateTimer()},_stopTimer:function(){null!==this.timer_interval&&(clearInterval(this.timer_interval),this.timer_interval=null)},_twoDigitNumber:function(t){var e=t.toString();return e.length>1?e:"0"+e},_updateTimer:function(){if(this.window.closed)this.hide();else{var t=new Date(new Date-this.time_start),e=this._twoDigitNumber,i=this.document.getElementById("timer");i.firstChild.textContent=t.getUTCHours()+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds()),i.setAttribute("datetime",t.getUTCHours()+"h "+t.getUTCMinutes()+"m "+t.getUTCSeconds()+"s")}}};var r={slide_selector:".slide",slide_title_selector:"header",slide_notes_selector:"footer"};function h(t,o){this.config={},n(this.config,r),"object"==typeof o&&n(this.config,o),this.container=t,i(this.container,"mode-full"),e(this.container,"mode-list"),this.scan(),this.events=new s,this.notes_window=new l(this)}h.prototype={notes_window:null,running:!1,current_slide_index:null,touch_identifier:null,touch_start_position:null,touch_last_position:null,start:function(t){if(!this.running){this.running=!0,null===this.current_slide_index&&(this.current_slide_index=0),e(document.body,"slideshow-running"),e(this.container,"mode-full"),i(this.container,"mode-list"),this._scaleDocument(),this.events.add(window,"resize",this._scaleDocument,this),this.events.add(document,"keydown",this._onKey,this),this.events.add(document,"touchstart",this._onTouchStart,this);var n=document.createEvent("CustomEvent");n.initCustomEvent("SlideshowStart",!0,!0,{slideshow:this.container}),this.container.dispatchEvent(n),this._display(this.current_slide_index)}},stop:function(t){var n;this.running&&(this.running=!1,this._isFullScreen()&&this.exitFullscreen(),this.events.removeAll(),i(this.container,"mode-full"),e(this.container,"mode-list"),i(document.body,"slideshow-running"),this._applyScale(1),this.notes_window.hide(),(n=document.createEvent("CustomEvent")).initCustomEvent("SlideHide",!0,!0,{slideshow:this,slide:this.slides[this.current_slide_index],number:this.current_slide_index+1}),this.slides[this.current_slide_index].element.dispatchEvent(n),(n=document.createEvent("CustomEvent")).initCustomEvent("SlideshowStop",!0,!0,{slideshow:this.container}),this.container.dispatchEvent(n))},toggleNotesWindow:function(){this.notes_window.isOpen()?this.notes_window.hide():this.notes_window.show()},enterFullscreen:function(){for(var t=["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msCancelFullScreen","oRequestFullScreen"],e=0;e<t.length;e++)if("function"==typeof this.container[t[e]]){this.container[t[e]](this.container);break}},exitFullscreen:function(){for(var t=["cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msCancelFullScreen","oCancelFullScreen"],e=0;e<t.length;e++)if("function"==typeof document[t[e]]){document[t[e]]();break}},_isFullScreen:function(){for(var t,e=["fullScreen","webkitIsFullScreen","mozFullScreen","msFullScreen","oFullScreen"],i=0;void 0===t&&i<e.length;i++)t=document[e[i]];return t},toggleFullscreen:function(){switch(this._isFullScreen()){case void 0:return;case!0:this.exitFullscreen();break;case!1:this.enterFullscreen()}},first:function(){this.running&&this._display(0)},previous:function(){this.running&&this.current_slide_index&&this._display(this.current_slide_index-1)},next:function(){this.running&&this.current_slide_index!=this.slides.length-1&&this._display(this.current_slide_index+1)},last:function(){this.running&&this._display(this.slides.length-1)},_applyScale:function(t){var e=1!=t?"scale("+t+")":"";this.container.style.WebkitTransform=e,this.container.style.MozTransform=e,this.container.style.msTransform=e,this.container.style.OTransform=e,this.container.style.transform=e},_scaleDocument:function(){var t=this.slides[0].element,e=1/Math.max(t.clientWidth/window.innerWidth,t.clientHeight/window.innerHeight);this._applyScale(e)},_showSlide:function(t){for(var e=0;e<this.slides.length;e++)if(this.slides[e]===t){this.current_slide_index=e;break}this.running?this._display(this.current_slide_index):this.start()},_display:function(t){for(var e,i,n=0;n<this.slides.length;n++)i=this.slides[n],n===t?i._markActive():i.active&&(i._markInactive(),(e=document.createEvent("CustomEvent")).initCustomEvent("SlideHide",!0,!0,{slideshow:this,slide:i,number:n+1}),i.element.dispatchEvent(e));this.current_slide_index=t,this.notes_window.update(),e=document.createEvent("CustomEvent"),i=this.slides[this.current_slide_index],e.initCustomEvent("SlideDisplay",!0,!0,{slideshow:this,slide:i,number:this.current_slide_index+1}),i.element.dispatchEvent(e)},_onKey:function(t){switch(t.which){case 27:t.preventDefault(),this.stop();break;case 33:case 38:case 37:t.preventDefault(),this.previous();break;case 32:case 34:case 39:case 40:t.preventDefault(),this.next();break;case 36:t.preventDefault(),this.first();break;case 35:t.preventDefault(),this.last();break;case 70:t.preventDefault(),this.toggleFullscreen();break;case 78:t.preventDefault(),this.toggleNotesWindow()}},_onTouchStart:function(t){1===t.touches.length&&(this.touch_identifier=t.touches[0].identifier,this.touch_start_position=[t.touches[0].pageX,t.touches[0].pageY],this.touch_last_position=[t.touches[0].pageX,t.touches[0].pageY],this.events.add(document,"touchmove",this._onTouchMove,this),this.events.add(document,"touchend",this._onTouchEnd,this),this.events.add(document,"touchcancel",this._onTouchCancel,this))},_onTouchMove:function(t){for(var e=0;e<t.touches.length;e++)if(t.touches[e].identifier===this.touch_identifier){this.touch_last_position[0]=t.touches[e].pageX,this.touch_last_position[1]=t.touches[e].pageY,t.preventDefault();break}},_onTouchEnd:function(t){for(var e=0;e<t.changedTouches.length&&null!==this.touch_identifier;e++)if(t.changedTouches[e].identifier===this.touch_identifier){this.touch_identifier=null;var i=this.touch_start_position[0]-this.touch_last_position[0],n=this.touch_start_position[1]-this.touch_last_position[1],s=Math.abs(i),o=Math.abs(n);if(Math.max(s,o)<50)continue;s>o?i<0?this.previous():this.next():n<0&&this.stop()}},_onTouchCancel:function(){this.touch_identifier=null,this.touch_start_position=null,this.touch_last_position=null,this.events.remove(document,"touchmove",this._onTouchMove),this.events.remove(document,"touchend",this._onTouchEnd),this.events.remove(document,"touchcancel",this._onTouchCancel)},scan:function(){var e=this.container.querySelectorAll(this.config.slide_selector);this.slides=[],this.current_slide_index=0;for(var i=0;i<e.length;i++){var n=e[i],s=t(n,"active");this.slides.push(new o(this,n,s,i+1)),s&&(this.current_slide_index=i)}}},window.Presentation=h}()}}]);
//# sourceMappingURL=2677.eb8887e66d5e154a5bc8.min.js.map